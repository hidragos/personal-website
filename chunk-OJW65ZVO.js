import{a as q}from"./chunk-4JM77DEA.js";import{e as N}from"./chunk-S2EGJNVF.js";import"./chunk-X5YLR3NI.js";import"./chunk-UTXEXKJQ.js";import{B as T,C as B,E as H,I as O,M as j,N as z,O as D,P as R,Q as $}from"./chunk-DNSHJFD5.js";import"./chunk-WXI33M2S.js";import{e as w,f as F,h as P}from"./chunk-FPD7F3TA.js";import{g as E}from"./chunk-IIQSA42B.js";import{m as M,o as I,p as k}from"./chunk-YYXHG7V6.js";import{Ab as A,Bb as S,Cb as l,Db as a,Eb as f,Ob as m,Wa as h,Xb as c,Yb as g,Zb as b,_a as i,ac as L,cc as d,da as p,fc as y,ha as x,hc as C,sb as u,ub as o}from"./chunk-5BPRXVO3.js";import{i as _}from"./chunk-ODN5LVDJ.js";var J=(e,s)=>s.id,G=e=>["/blog",e],K=e=>["/blog",e,"edit"];function Q(e,s){e&1&&(l(0,"mat-icon"),c(1,"add"),a())}function U(e,s){e&1&&(l(0,"span"),c(1,"New article"),a())}function V(e,s){e&1&&(l(0,"span"),c(1,"Login to write an article"),a())}function W(e,s){if(e&1&&(l(0,"a",13),c(1," Read more... "),a()),e&2){let n=m().$implicit;o("routerLink",d(1,G,n.id))}}function X(e,s){if(e&1&&(l(0,"div",14)(1,"a",15),c(2," Edit "),a()()),e&2){let n=m().$implicit;i(),o("routerLink",d(1,K,n.id))}}function Y(e,s){if(e&1&&(l(0,"mat-card-content",6)(1,"mat-card-header")(2,"mat-card-title",7)(3,"span"),c(4),a()()(),l(5,"div",8)(6,"span"),c(7),a(),c(8," ~ "),l(9,"span"),c(10),y(11,"date"),a()(),f(12,"div",9),u(13,W,2,3,"a",10)(14,X,3,3,"div",11),a(),f(15,"div",12)),e&2){let n,r,t=s.$implicit,v=m();i(2),o("routerLink",d(10,G,t.id)),i(2),g(t.title),i(3),g((n=t.profiles==null?null:t.profiles.full_name)!==null&&n!==void 0?n:t.profiles==null?null:t.profiles.email),i(3),b(" ",C(11,7,t.inserted_at,"longDate")," "),i(2),o("innerHTML",t.contentSafeHtmlPreview,h),i(),o("ngIf",(t.content==null?null:t.content.length)>500),i(),o("ngIf",v.supabaseAuthService.user()&&(t.profiles==null?null:t.profiles.email)===((r=v.supabaseAuthService.user())==null?null:r.email))}}var ge=(()=>{class e{blogService=p(q);sanitizer=p(E);supabaseAuthService=p(N);articles=[];loaded=!1;ngOnInit(){this.getAllArticles()}getAllArticles(){return _(this,null,function*(){let n=(yield this.blogService.getAll()).data;n?.forEach(r=>{r.contentSafeHtmlPreview=this.sanitizer.bypassSecurityTrustHtml(r.content||"")}),this.articles=n?.sort((r,t)=>r.updated_at>t.updated_at?-1:1)||[],this.loaded=!0})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=x({type:e,selectors:[["app-blog-article-list"]],standalone:!0,features:[L],decls:11,vars:4,consts:[[1,"flex","flex-col"],[1,"flex","flex-col","items-center","pt-4","gap-12"],[1,"flex","justify-end","mb-6","w-full"],["color","tertiary","routerLink","new","mat-button","",3,"disabled"],[4,"ngIf"],["appearance","outlined"],[1,"mb-4"],["mat-button","",1,"cursor-pointer","hover:underline",3,"routerLink"],[1,"flex","gap-1","justify-start","mt-2","items-center","text-xs","font-light"],[1,"content-text","mt-8","mb-4",3,"innerHTML"],["routerLinkActive","item-selected","class","hover:underline color-primary pt-8",3,"routerLink",4,"ngIf"],["class","flex justify-end",4,"ngIf"],[1,"post-separator","z-10"],["routerLinkActive","item-selected",1,"hover:underline","color-primary","pt-8",3,"routerLink"],[1,"flex","justify-end"],["routerLinkActive","item-selected","mat-button","",3,"routerLink"]],template:function(r,t){r&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),u(4,Q,2,0,"mat-icon",4)(5,U,2,0,"span",4)(6,V,2,0,"span",4),a()()(),l(7,"div",0)(8,"mat-card",5),A(9,Y,16,12,null,null,J),a()()()),r&2&&(i(3),o("disabled",!t.supabaseAuthService.user()),i(),o("ngIf",t.supabaseAuthService.user()),i(),o("ngIf",t.supabaseAuthService.user()),i(),o("ngIf",!t.supabaseAuthService.user()),i(3),S(t.articles))},dependencies:[$,j,D,R,z,k,M,I,O,H,P,w,F,B,T],styles:["mat-card-header[_ngcontent-%COMP%]{border:0px!important}.no-underline[_ngcontent-%COMP%]{text-decoration-line:none!important}.content-text[_ngcontent-%COMP%]{line-height:1.6em;height:8em;overflow:hidden}"]})}return e})();export{ge as BlogArticleListComponent};
