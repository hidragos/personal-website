import{a as Di,b as Li,c as Bi,d as Be,e as We,f as Yi,g as re,h as P,i as Xi,j as Zi,k as Ji,l as en,m as tn,n as nn,o as on,p as rn,q as Ue,r as an,s as sn,t as ln,u as qe,v as $e,w as cn,x as mn,y as Ke}from"./chunk-GCAR6N5S.js";import"./chunk-X5YLR3NI.js";import"./chunk-DIBWM2VE.js";import"./chunk-HMBOABBU.js";import{a as pn,b as Qe,c as Ge,d as Ye}from"./chunk-BTTUQB4U.js";import{A as Qi,C as Gi,D as ze,E as He,b as Oi,e as Ri,j as Vi,k as Ve,l as H,n as Ne,o as Ni,q as ji,r as zi,s as Hi,t as Wi,u as Ui,v as qi,w as $i,x as Ki,y as je}from"./chunk-KK2CDXNF.js";import{$ as B,D as ue,K as yi,L as Ci,M as bi,N as Fe,O as xi,P as Si,Q as lt,S as Z,V as Pe,X as J,Z as wi,_ as ee,aa as Ai,ba as te,d as ri,da as Mi,ea as ie,fa as De,ga as ne,h as ai,i as si,ia as Le,ja as oe,l as li,la as ki,m as ci,n as mi,o as Ie,pa as Fi,q as _i,r as gi,s as st,sa as fe,t as ke,ta as Pi,u as vi}from"./chunk-3ZVAZC7S.js";import{c as Ti,d as Re,e as Ei,g as he,h as Ii,i as ct}from"./chunk-2J4O7ELU.js";import{a as pi,b as Y,c as di,d as L,e as ui,f as hi,g as fi,h as X}from"./chunk-MKT6AYFA.js";import{a as Jt,b as ei,c as ti,d as ii,e as ni,g as D,h as oi}from"./chunk-LUYJJVFE.js";import{d as Ee,f as Yt,h as Xt,k as Zt,l as K,m as Q,p as G,r as S}from"./chunk-F6VEFF7R.js";import{Aa as W,Ab as ot,Ba as we,Bb as ce,Bc as Gt,Cb as Vt,Cc as de,D as tt,Da as Ae,Db as Nt,Eb as jt,F as bt,Fb as a,Gb as l,Hb as g,Hc as z,Ib as N,Ja as Tt,Jb as j,Kb as M,Pb as v,R as xt,Rb as p,S as ye,Sb as zt,Tb as Ht,U as Ce,Ub as rt,W as St,Wa as Et,Wb as at,Xa as V,Xb as R,Y as wt,Yb as k,Z as I,Za as It,Zb as F,_ as be,a as _e,aa as it,ab as s,ac as me,bb as b,bc as u,c as gt,cb as kt,cc as O,da as d,db as Ft,dc as _,eb as Pt,ec as Wt,f as et,fc as Ut,gb as Rt,gc as qt,ha as w,hc as $t,ia as xe,ib as Dt,ic as pe,ja as At,jc as A,k as vt,kc as Te,la as Mt,lb as Lt,lc as U,mb as Bt,o as yt,oc as q,qa as Se,qc as $,ra as y,sa as C,sb as Me,t as Ct,uc as Kt,v as ge,vb as f,w as le,wb as Oe,x as ve,xa as Ot,xb as c,zb as nt,zc as Qt}from"./chunk-TLNYMMAR.js";import{i as x}from"./chunk-ODN5LVDJ.js";var Bn=["container"],dn=(()=>{class n{matIconRegistry;domSanitizer;container;sidenavContainerService=d(Zi);router=d(L);navbarService=d(Xi);scrollPersistenceService=d(an);routerSubscription;customIcons=["github","linkedin","stackoverflow","cow","heart","heart_fill"];constructor(t,e){this.matIconRegistry=t,this.domSanitizer=e,this.customIcons.forEach(i=>{this.matIconRegistry.addSvgIcon(i,this.domSanitizer.bypassSecurityTrustResourceUrl(`assets/images/${i}.svg`))})}get scrollKey(){return this.router.url}ngOnInit(){this.router.events.subscribe(t=>{if(t instanceof pi&&this.container){let e=this.scrollPersistenceService.getScrollPosition(this.scrollKey);e!==null?this.container.nativeElement.scrollTop=e:this.container.nativeElement.scrollTop=0}}),this.matIconRegistry.setDefaultFontSetClass("material-symbols-outlined")}ngAfterViewInit(){this.container.nativeElement.addEventListener("scroll",()=>{let t=this.container.nativeElement.scrollTop;this.navbarService.setScrollTop(t)})}static \u0275fac=function(e){return new(e||n)(b(wi),b(D))};static \u0275cmp=w({type:n,selectors:[["app-root"]],viewQuery:function(e,i){if(e&1&&R(Bn,5),e&2){let o;k(o=F())&&(i.container=o.first)}},standalone:!0,features:[pe([]),A],decls:7,vars:0,consts:[["container",""],["appScrollToEnd","",1,"app-container","overflow-y-scroll","overflow-x-hidden","h-screen-dvh","flex","flex-col"],[1,"grow"]],template:function(e,i){e&1&&(a(0,"app-sidenav-container")(1,"div",1,0),g(3,"app-navbar"),a(4,"div",2),g(5,"router-outlet"),l(),g(6,"app-footer"),l()())},dependencies:[di,on,Oi,Ji,S,Ue,mi],styles:[".app-container[_ngcontent-%COMP%]{height:100dvh}#container[_ngcontent-%COMP%]{scroll-behavior:smooth}"]})}return n})();var Vn="@",Nn=(()=>{let r=class r{constructor(e,i,o,m,h){this.doc=e,this.delegate=i,this.zone=o,this.animationType=m,this.moduleImpl=h,this._rendererFactoryPromise=null,this.scheduler=d(Pt,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-GHOF7KRO.js").then(i=>i)).catch(i=>{throw new St(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:o})=>{this._engine=i(this.animationType,this.doc);let m=new o(this.delegate,this._engine,this.zone);return this.delegate=m,m})}createRenderer(e,i){let o=this.delegate.createRenderer(e,i);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let m=new pt(o);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(h=>{let se=h.createRenderer(e,i);m.use(se),this.scheduler?.notify(9)}).catch(h=>{m.use(o)}),m}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};r.\u0275fac=function(i){kt()},r.\u0275prov=I({token:r,factory:r.\u0275fac});let n=r;return n})(),pt=class{constructor(r){this.delegate=r,this.replay=[],this.\u0275type=1}use(r){if(this.delegate=r,this.replay!==null){for(let t of this.replay)t(r);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(r,t){return this.delegate.createElement(r,t)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}get destroyNode(){return this.delegate.destroyNode}appendChild(r,t){this.delegate.appendChild(r,t)}insertBefore(r,t,e,i){this.delegate.insertBefore(r,t,e,i)}removeChild(r,t,e){this.delegate.removeChild(r,t,e)}selectRootElement(r,t){return this.delegate.selectRootElement(r,t)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,t,e,i){this.delegate.setAttribute(r,t,e,i)}removeAttribute(r,t,e){this.delegate.removeAttribute(r,t,e)}addClass(r,t){this.delegate.addClass(r,t)}removeClass(r,t){this.delegate.removeClass(r,t)}setStyle(r,t,e,i){this.delegate.setStyle(r,t,e,i)}removeStyle(r,t,e){this.delegate.removeStyle(r,t,e)}setProperty(r,t,e){this.shouldReplay(t)&&this.replay.push(i=>i.setProperty(r,t,e)),this.delegate.setProperty(r,t,e)}setValue(r,t){this.delegate.setValue(r,t)}listen(r,t,e){return this.shouldReplay(t)&&this.replay.push(i=>i.listen(r,t,e)),this.delegate.listen(r,t,e)}shouldReplay(r){return this.replay!==null&&r.startsWith(Vn)}};function un(n="animations"){return Dt("NgAsyncAnimations"),Mt([{provide:Rt,useFactory:(r,t,e)=>new Nn(r,t,e,n),deps:[Ee,ii,we]},{provide:Tt,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Wn=["panel"],Un=["*"];function qn(n,r){if(n&1){let t=M();a(0,"div",1,0),v("@panelAnimation.done",function(i){y(t);let o=p();return C(o._animationDone.next(i))}),Ht(2),l()}if(n&2){let t=r.id,e=p();ot(e._classList),nt("mat-mdc-autocomplete-visible",e.showPanel)("mat-mdc-autocomplete-hidden",!e.showPanel)("mat-primary",e._color==="primary")("mat-accent",e._color==="accent")("mat-warn",e._color==="warn"),c("id",e.id)("@panelAnimation",e.isOpen?"visible":"hidden"),Oe("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby(t))}}var $n=Ti("panelAnimation",[Ii("void, hidden",he({opacity:0,transform:"scaleY(0.8)"})),ct(":enter, hidden => visible",[Ei([Re("0.03s linear",he({opacity:1})),Re("0.12s cubic-bezier(0, 0, 0.2, 1)",he({transform:"scaleY(1)"}))])]),ct(":leave, visible => hidden",[Re("0.075s linear",he({opacity:0}))])]),Kn=0,dt=class{constructor(r,t){this.source=r,this.option=t}},_n=new it("mat-autocomplete-default-options",{providedIn:"root",factory:Qn});function Qn(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}var gn=(()=>{let r=class r{get isOpen(){return this._isOpen&&this.showPanel}_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}constructor(e,i,o,m){this._changeDetectorRef=e,this._elementRef=i,this._defaults=o,this._activeOptionChanges=_e.EMPTY,this._animationDone=new W,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new W,this.opened=new W,this.closed=new W,this.optionActivated=new W,this.id=`mat-autocomplete-${Kn++}`,this.inertGroups=m?.SAFARI||!1,this.autoActiveFirstOption=!!o.autoActiveFirstOption,this.autoSelectActiveOption=!!o.autoSelectActiveOption,this.requireSelection=!!o.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new vi(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){let i=new dt(this,e);this.optionSelected.emit(i)}_getPanelAriaLabelledby(e){if(this.ariaLabel)return null;let i=e?e+" ":"";return this.ariaLabelledby?i+this.ariaLabelledby:e}_skipPredicate(){return!1}};r.\u0275fac=function(i){return new(i||r)(b(de),b(Ae),b(_n),b(ri))},r.\u0275cmp=w({type:r,selectors:[["mat-autocomplete"]],contentQueries:function(i,o,m){if(i&1&&(at(m,Fe,5),at(m,Ci,5)),i&2){let h;k(h=F())&&(o.options=h),k(h=F())&&(o.optionGroups=h)}},viewQuery:function(i,o){if(i&1&&(R(Ft,7),R(Wn,5)),i&2){let m;k(m=F())&&(o.template=m.first),k(m=F())&&(o.panel=m.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",z],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",z],requireSelection:[2,"requireSelection","requireSelection",z],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",z],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",z]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[pe([{provide:yi,useExisting:r}]),Me,A],ngContentSelectors:Un,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(i,o){i&1&&(zt(),f(0,qn,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-app-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow);background-color:var(--mat-autocomplete-background-color, var(--mat-app-surface-container))}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[$n]},changeDetection:0});let n=r;return n})();var Gn={provide:Vi,useExisting:wt(()=>ut),multi:!0};var vn=new it("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let n=d(fe);return()=>n.scrollStrategies.reposition()}});function Yn(n){return()=>n.scrollStrategies.reposition()}var Xn={provide:vn,deps:[fe],useFactory:Yn},ut=(()=>{let r=class r{constructor(e,i,o,m,h,se,kn,Fn,Pn,Rn,Dn){this._element=e,this._overlay=i,this._viewContainerRef=o,this._zone=m,this._changeDetectorRef=h,this._dir=kn,this._formField=Fn,this._document=Pn,this._viewportRuler=Rn,this._defaults=Dn,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=_e.EMPTY,this._breakpointObserver=d(_i),this._handsetLandscapeSubscription=_e.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new et,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._initialized=new et,this._injector=d(Ot),this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=Ct(()=>{let T=this.autocomplete?this.autocomplete.options:null;return T?T.changes.pipe(xt(T),ye(()=>le(...T.map(Ln=>Ln.onSelectionChange)))):this._initialized.pipe(ye(()=>this.optionSelections))}),this._handlePanelKeydown=T=>{(T.keyCode===27&&!Ie(T)||T.keyCode===38&&Ie(T,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),T.stopPropagation(),T.preventDefault())},this._trackedModal=null,this._scrollStrategy=se}ngAfterViewInit(){this._initialized.next(),this._initialized.complete();let e=this._getWindow();typeof e<"u"&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){let e=this._getWindow();typeof e<"u"&&e.removeEventListener("blur",this._windowBlurHandler),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&ke(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return le(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(ve(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(ve(()=>this._overlayAttached)):vt()).pipe(yt(e=>e instanceof bi?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return le(ge(this._document,"click"),ge(this._document,"auxclick"),ge(this._document,"touchend")).pipe(ve(e=>{let i=ai(e),o=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,m=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!o||!o.contains(i))&&(!m||!m.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){let i=e.keyCode,o=Ie(e);if(i===27&&!o&&e.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&i===13&&this.panelOpen&&!o)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){let m=this.autocomplete._keyManager.activeItem,h=i===38||i===40;i===9||h&&!o&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):h&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(h||this.autocomplete._keyManager.activeItem!==m)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let i=e.target,o=i.value;if(i.type==="number"&&(o=o==""?null:parseFloat(o)),this._previousValue!==o){if(this._previousValue=o,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(o),!o)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let m=this.autocomplete.options?.find(h=>h.selected);if(m){let h=this._getDisplayValue(m.value);o!==h&&m.deselect(!1)}}if(this._canOpen()&&this._document.activeElement===e.target){let m=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(m)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(e=!1){this._formField&&this._formField.floatLabel==="auto"&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let e=new gt(o=>{Lt(()=>{o.next()},{injector:this._injector})}),i=this.autocomplete.options.changes.pipe(Ce(()=>this._positionStrategy.reapplyLastPosition()),bt(0));return le(e,i).pipe(ye(()=>this._zone.run(()=>{let o=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),o!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),tt(1)).subscribe(o=>this._setValueAndClose(o))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){let i=this.autocomplete;return i&&i.displayWith?i.displayWith(e):e}_assignOptionValue(e){let i=this._getDisplayValue(e);e==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(i??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){let i=this.autocomplete,o=e?e.source:this._pendingAutoselectedOption;o?(this._clearPreviousSelectedOption(o),this._assignOptionValue(o.value),this._onChange(o.value),i._emitSelectEvent(o),this._element.nativeElement.focus()):i.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),i._animationDone?i._animationDone.pipe(tt(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,i){this.autocomplete?.options?.forEach(o=>{o!==e&&o.selected&&o.deselect(i)})}_openPanelInternal(e=this._element.nativeElement.value){if(this._attachOverlay(e),this._floatLabel(),this._trackedModal){let i=this.autocomplete.id;st(this._trackedModal,"aria-owns",i)}}_attachOverlay(e){this.autocomplete;let i=this._overlayRef;i?(this._positionStrategy.setOrigin(this._getConnectedElement()),i.updateSize({width:this._getPanelWidth()})):(this._portal=new ki(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),i=this._overlay.create(this._getOverlayConfig()),this._overlayRef=i,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&i&&i.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe(gi.HandsetLandscape).subscribe(m=>{m.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),i&&!i.hasAttached()&&(i.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let o=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&o!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new Fi({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){let e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){let i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],o=this._aboveClass,m=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:o},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:o}],h;this.position==="above"?h=m:this.position==="below"?h=i:h=[...i,...m],e.withPositions(h)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let e=this.autocomplete;if(e.autoActiveFirstOption){let i=-1;for(let o=0;o<e.options.length;o++)if(!e.options.get(o).disabled){i=o;break}e._keyManager.setActiveItem(i)}else e._keyManager.setActiveItem(-1)}_canOpen(){let e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(e){let i=this.autocomplete,o=xi(e,i.options,i.optionGroups);if(e===0&&o===1)i._setScrollTop(0);else if(i.panel){let m=i.options.toArray()[e];if(m){let h=m._getHostElement(),se=Si(h.offsetTop,h.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(se)}}}_applyModalPanelOwnership(){let e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let i=this.autocomplete.id;this._trackedModal&&ke(this._trackedModal,"aria-owns",i),st(e,"aria-owns",i),this._trackedModal=e}_clearFromModal(){if(this._trackedModal){let e=this.autocomplete.id;ke(this._trackedModal,"aria-owns",e),this._trackedModal=null}}};r.\u0275fac=function(i){return new(i||r)(b(Ae),b(fe),b(Bt),b(we),b(de),b(vn),b(si,8),b(Gi,9),b(Ee,8),b(li),b(_n,8))},r.\u0275dir=At({type:r,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(i,o){i&1&&v("focusin",function(){return o._handleFocus()})("blur",function(){return o._onTouched()})("input",function(h){return o._handleInput(h)})("keydown",function(h){return o._handleKeydown(h)})("click",function(){return o._handleClick()}),i&2&&Oe("autocomplete",o.autocompleteAttribute)("role",o.autocompleteDisabled?null:"combobox")("aria-autocomplete",o.autocompleteDisabled?null:"list")("aria-activedescendant",o.panelOpen&&o.activeOption?o.activeOption.id:null)("aria-expanded",o.autocompleteDisabled?null:o.panelOpen.toString())("aria-controls",o.autocompleteDisabled||!o.panelOpen||o.autocomplete==null?null:o.autocomplete.id)("aria-haspopup",o.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",z]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[pe([Gn]),Me,Se]});let n=r;return n})(),yn=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=xe({type:r}),r.\u0275inj=be({providers:[Xn],imports:[Pi,lt,ue,S,ci,lt,ue]});let n=r;return n})();var Xe=(()=>{class n{sanitizer=d(D);article={};sanitizeHtml(){this.article.contentSafeHtml=this.sanitizer.bypassSecurityTrustHtml(this.article.content||"")}ngOnChanges(){this.sanitizeHtml()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-blog-article-view"]],inputs:{article:"article"},standalone:!0,features:[Se,A],decls:14,vars:9,consts:[[1,"h-full",3,"appearance"],[1,"flex","flex-col","justify-start","gap-6","mb-12","w-full"],[1,"flex","page-title","justify-start"],[1,"flex","flex-row","items","gap-2","items-center","text-ellipsis"],[1,"rounded-full","w-16","mat-elevation-z2",3,"src"],[1,"flex","flex-col"],[1,"font-light","text-sm"],[1,"content-text",3,"innerHTML"]],template:function(e,i){if(e&1&&(a(0,"mat-card",0)(1,"mat-card-content")(2,"div",1)(3,"h1",2),u(4),l(),a(5,"div",3),g(6,"img",4),a(7,"div",5)(8,"span"),u(9),l(),a(10,"span",6),u(11),q(12,"date"),l()()()(),g(13,"div",7),l()()),e&2){let o;c("appearance","outlined"),s(4),_(" ",i.article.title," "),s(2),c("src",i.article.profiles==null?null:i.article.profiles.avatar_url,V),s(3),O((o=i.article.profiles==null?null:i.article.profiles.full_name)!==null&&o!==void 0?o:i.article.profiles==null?null:i.article.profiles.email),s(2),_(" ",$(12,6,i.article.inserted_at,"longDate")," "),s(2),c("innerHTML",i.article.contentSafeHtml,Et)}},dependencies:[S,G,oe,ie,ne,B],styles:["mat-card-content[_ngcontent-%COMP%]{padding-bottom:0!important}mat-card-header[_ngcontent-%COMP%]{border:0px!important}"]})}return n})();var ae=(()=>{class n{relation="articles";_supabaseService=d(re);_supabaseAuthService=d(P);supabase=this._supabaseService.supabaseClient;constructor(){}post(t){return t.user_id=this._supabaseAuthService.user()?.id,this.supabase.from(this.relation).upsert(t).select("*,profiles(*)")}put(t,e){return this.supabase.from(this.relation).update(e).eq("id",t).select("*,profiles(*)")}delete(t){return this.supabase.from(this.relation).delete().eq("id",t)}getByUrl(t){return this.supabase.from(this.relation).select("*,comments(*,profiles(*)),profiles(*)").eq("url",t)}getById(t){return this.supabase.from("articles").select("*,comments(*,profiles(*)),profiles(*)").eq("id",t)}getAll(t,e,i){let o=this.supabase.from(this.relation).select("*,comments(*,profiles(*)),profiles(*)").order("updated_at",{ascending:!1});return(i?.userId?.length||i?.tag?.length)&&(i?.userId?.length&&o.eq("user_id",i.userId),i?.tag?.length&&o.contains("tags",[i.tag])),o.range(e,e+t-1),o}getAuthors(){return this.supabase.from("unique_authors").select("*,profiles(*)")}getExisingTags(){return this.supabase.from("unique_tags").select("tag")}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var no=["editor"],oo=n=>({"opacity-0":n}),ro=()=>({standalone:!0});function ao(n,r){if(n&1&&(a(0,"mat-option",17),u(1),l()),n&2){let t=r.$implicit;c("value",t),s(),O(t)}}function so(n,r){if(n&1){let t=M();a(0,"mat-chip",29),v("click",function(){let i=y(t).$implicit,o=p(3);return C(o.onRemoveTag(i))}),a(1,"div",30)(2,"span",31),u(3),l(),a(4,"button",32),v("click",function(){let i=y(t).$implicit,o=p(3);return C(o.onRemoveTag(i))}),a(5,"mat-icon"),u(6,"cancel"),l()()()()}if(n&2){let t=r.$implicit;s(3),O(t)}}function lo(n,r){if(n&1){let t=M();a(0,"button",33),v("click",function(){y(t);let i=p(3);return C(i.onDelete())}),u(1),l()}if(n&2){let t=p(2).$implicit;s(),_(" ",t("blog.edit.delete")," ")}}function co(n,r){if(n&1){let t=M();a(0,"button",34),v("click",function(){y(t);let i=p(3);return C(i.onRestore())}),u(1),l()}if(n&2){let t=p(2).$implicit,e=p();c("disabled",e.articleForm.pristine),s(),_(" ",t("blog.edit.restore")," ")}}function mo(n,r){if(n&1&&(a(0,"p",37),u(1),l()),n&2){let t=r.$implicit;s(),_(" * ",t," ")}}function po(n,r){if(n&1&&(a(0,"div",35),f(1,mo,2,1,"p",36),l()),n&2){let t=p(3);s(),c("ngForOf",t.errorMessages)}}function uo(n,r){if(n&1){let t=M();a(0,"form",6),v("ngSubmit",function(){y(t);let i=p(2);return C(i.onSubmit())}),a(1,"mat-card-header")(2,"mat-card-title")(3,"div",7)(4,"span",8),u(5," * "),l(),a(6,"mat-form-field",9),g(7,"textarea",10,0),l()()()(),a(9,"div",11),g(10,"app-wysiwyg-editor",12),a(11,"mat-form-field",9),g(12,"textarea",13),l(),a(13,"div",14)(14,"div")(15,"mat-form-field",15)(16,"input",16),$t("ngModelChange",function(i){y(t);let o=p(2);return qt(o.newTag,i)||(o.newTag=i),C(i)}),v("keydown",function(i){y(t);let o=p(2);return C(o.onAddTag(i))}),l(),a(17,"mat-autocomplete",null,1),Nt(19,ao,2,2,"mat-option",17,Vt),l(),a(21,"button",18),v("click",function(){y(t);let i=p(2);return C(i.onAddTag())}),a(22,"mat-icon"),u(23,"add"),l()()()(),a(24,"mat-chip-set",19),f(25,so,7,1,"mat-chip",20),l()(),a(26,"div",21)(27,"div",22),f(28,lo,2,1,"button",23)(29,co,2,2,"button",24),l(),a(30,"div",25)(31,"button",26),v("click",function(){y(t);let i=p(2);return C(i.togglePreview())}),u(32),l(),a(33,"button",27),u(34),l()()()(),f(35,po,2,1,"div",28),l()}if(n&2){let t,e=me(18),i=p().$implicit,o=p();c("formGroup",o.articleForm),s(4),c("ngClass",U(18,oo,o.articleForm.pristine)),s(3),c("placeholder",i("blog.edit.titlePlaceholder"))("maxLength",100),s(3),c("placeholder",i("blog.edit.contentPlaceholder")),s(2),c("placeholder",i("blog.edit.descriptionPlaceholder"))("maxLength",200),s(4),c("appTogglablePlaceholder",i("blog.edit.tagsPlaceholder")),Ut("ngModel",o.newTag),c("ngModelOptions",Te(20,ro))("matAutocomplete",e),s(3),jt(o.filteredExistingTags()),s(6),c("ngForOf",o.tags==null?null:o.tags.value),s(3),c("ngIf",o.id),s(),c("ngIf",o.id),s(3),_(" ",i("blog.edit.preview")," "),s(),c("disabled",o.articleForm.pristine),s(),_(" ",i("blog.edit.save")," "),s(),c("ngIf",(t=o.articleForm.get("title"))==null?null:t.invalid)}}function ho(n,r){if(n&1){let t=M();a(0,"div"),g(1,"app-blog-article-view",38),a(2,"div",39)(3,"button",40),v("click",function(){y(t);let i=p(2);return C(i.togglePreview())}),u(4),l()()()}if(n&2){let t=p().$implicit,e=p();s(),c("article",e.articleForm.value),s(3),_(" ",t("blog.edit.backToEdit")," ")}}function fo(n,r){if(n&1&&(N(0),a(1,"mat-card",3)(2,"mat-card-content"),f(3,uo,36,21,"form",4)(4,ho,5,2,"div",5),l()(),j()),n&2){let t=p();s(),c("appearance","outlined"),s(2),c("ngIf",t.articleForm&&t.article&&!t.previewMode),s(),c("ngIf",t.previewMode)}}var ft=(()=>{class n{editor;articleService=d(ae);route=d(Y);formBuilder=d($i);matDialog=d(Ri);router=d(L);snackBar=d(Ke);sanitizer=d(D);cdRef=d(de);newTag="";previewMode=!1;supabaseAuthService=d(P);existingTags=[];filteredExistingTags=()=>this.existingTags.filter(t=>!this.tags?.value.includes(t.toLocaleLowerCase())&&t.toLowerCase().includes(this.newTag.toLocaleLowerCase()));article={};articleForm;editorApiKey=Yi.tinyMicApiKeys;errorMessages=[];id=+this.route.snapshot.params.id;get content(){return this.articleForm.get("content")}get title(){return this.articleForm.get("title")}get tags(){return this.articleForm.get("tags")}get description(){return this.articleForm.get("description")}ngOnInit(){this.id=+this.route.snapshot.params.id,this.getArticle(),this.getExistingTags()}unloadNotification(t){this.articleForm&&this.articleForm.dirty&&!this.previewMode&&(t.returnValue=!0)}getExistingTags(){return x(this,null,function*(){let t=(yield this.articleService.getExisingTags()).data;this.existingTags=t?.map(e=>e.tag)||[]})}getArticle(){return x(this,null,function*(){if(!this.id){this.createForm();return}let t=(yield this.articleService.getById(this.id)).data?.[0];t&&(this.article=t??{},this.createForm(t))})}createForm(t={}){this.articleForm=this.formBuilder.group({title:[t?.title,H.required],content:[t?.content,H.required],tags:[t?.tags||[]],description:[t?.description,[H.required,H.maxLength(200)]]})}togglePreview(){this.previewMode=!this.previewMode}onAddTag(t){if(t?.key&&!["Enter",","," "].includes(t.key))return;t?.preventDefault();let e=this.tags?.value.map(o=>o.toLocaleLowerCase())||[];if(!this.newTag||e.includes(this.newTag.toLocaleLowerCase()))return;this.newTag.split(",").forEach(o=>{o=o.trim();let m=e.includes(o)?[]:[o];e.push(...m)}),this.tags?.patchValue(e),this.articleForm.markAsDirty(),this.newTag=""}onRemoveTag(t){let e=this.tags?.value||[],i=e.indexOf(t);i!==-1&&(e.splice(i,1),this.tags?.patchValue(e),this.articleForm.markAsDirty())}onDelete(){return x(this,null,function*(){(yield this.matDialog.open(We).afterClosed().toPromise())&&(yield this.articleService.delete(this.id),this.openSnackBar("Article deleted"),this.back(!0))})}onRestore(){return x(this,null,function*(){(yield this.matDialog.open(We,{data:{title:"Restore article",text:"Are you sure you want to restore this article?",confirmText:"Restore"}}).afterClosed().toPromise())&&(yield this.getArticle(),this.openSnackBar("Article restored"))})}openSnackBar(t){this.snackBar.open(t,"")}onSubmit(){return x(this,null,function*(){this.errorMessages=[],this.articleForm.get("title")?.patchValue(this.title?.value?.trim());let t=this.articleForm.errors;if(t&&(this.errorMessages=Object.keys(t).map(e=>t[e])),!this.articleForm.invalid){if(this.article.title=this.title?.value,this.article.content=this.content?.value,this.article.tags=this.tags?.value,this.article.description=this.articleForm.get("description")?.value,this.id)yield this.articleService.put(this.id,this.articleForm.value),this.openSnackBar("Article saved");else{let e=yield this.articleService.post(this.articleForm.value);e&&(this.id=e.data?.[0].id),this.router.navigate(["/blog/"+this.id+"/edit"]),this.openSnackBar("Article created")}this.articleForm.reset(this.articleForm.value),this.articleForm.markAsPristine()}})}back(t=!1){if(this.articleForm.dirty&&!t){this.confirmExit().toPromise().then(e=>{e&&this.router.navigate(["/blog"])});return}this.router.navigate(["/blog"])}confirmExit(){return this.matDialog.open(We,{data:{title:"Unsaved changes",text:"Are you sure you want to leave this page?",confirmText:"Leave"}}).afterClosed().pipe(Ce(t=>console.log("isSure",t)))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-blog-article"]],viewQuery:function(e,i){if(e&1&&R(no,5),e&2){let o;k(o=F())&&(i.editor=o.first)}},hostBindings:function(e,i){e&1&&v("beforeunload",function(m){return i.unloadNotification(m)},!1,It)},standalone:!0,features:[A],decls:1,vars:0,consts:[["input",""],["auto","matAutocomplete"],[4,"transloco"],[1,"h-full",3,"appearance"],["class","flex flex-col h-full",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],[1,"flex","flex-col","h-full",3,"ngSubmit","formGroup"],[1,"flex","sm:flex-row","items-start","gap-1","flex-col","justify-between","flex-wrap"],[1,"text-end","w-full","text-2xl",3,"ngClass"],["appearance","outline",1,"w-full"],["cdkTextareaAutosize","","matInput","","formControlName","title",3,"placeholder","maxLength"],[1,"grow"],["formControlName","content",3,"placeholder"],["cdkTextareaAutosize","","rows","2","matInput","","formControlName","description",3,"placeholder","maxLength"],[1,"mt-8","flex","flex-col"],["appearance","outline"],["matInput","",3,"ngModelChange","keydown","appTogglablePlaceholder","ngModel","ngModelOptions","matAutocomplete"],[3,"value"],["matSuffix","","mat-icon-button","","type","button",1,"mr-2",3,"click"],[1,"pt-2"],[3,"click",4,"ngFor","ngForOf"],[1,"flex","sm:flex-row","flex-col-reverse","justify-between","gap-4","pt-4"],[1,"flex","sm:flex-row","flex-col-reverse","justify-start","gap-4"],["color","warn","mat-button","","type","button",3,"click",4,"ngIf"],["mat-button","","type","button",3,"disabled","click",4,"ngIf"],[1,"flex","sm:flex-row","flex-col-reverse","justify-end","gap-4"],["mat-button","","type","button",3,"click"],["mat-flat-button","",3,"disabled"],["class","flex flex-col items-end justify-end pt-4",4,"ngIf"],[3,"click"],[1,"flex","flex-row","justify-start","items-center"],[1,"text-xs"],["matChipRemove","","type","button",3,"click"],["color","warn","mat-button","","type","button",3,"click"],["mat-button","","type","button",3,"click","disabled"],[1,"flex","flex-col","items-end","justify-end","pt-4"],["class","color-error",4,"ngFor","ngForOf"],[1,"color-error"],[3,"article"],[1,"flex","justify-end","mt-16"],["mat-button","",3,"click"]],template:function(e,i){e&1&&f(0,fo,5,3,"ng-container",2)},dependencies:[S,Zt,K,Q,Ki,Hi,Ve,Ne,Ni,zi,je,Ui,qi,J,Z,Pe,B,ee,$e,qe,ze,Qi,ln,oe,ie,ne,Le,De,He,Be,yn,gn,Fe,ut,Ye,Qe,pn,Ge,cn,rn,X,te,Xe],styles:["mat-card-header[_ngcontent-%COMP%]{padding-right:0;padding-top:0}"]})}return n})(),xn=(()=>{class n{canDeactivate(t){return t.articleForm.dirty&&!t.previewMode?t.confirmExit():!0}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Sn=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=xe({type:r}),r.\u0275inj=be({imports:[S,ue]});let n=r;return n})();var _t=n=>["/blog",n];function _o(n,r){if(n&1){let t=M();a(0,"mat-chip",15),v("click",function(){let i=y(t).$implicit,o=p(2);return C(o.selectTag(i))}),a(1,"span",16),u(2),l()()}if(n&2){let t=r.$implicit,e=p(2);c("highlighted",e.filters.tag===t),s(2),O(t)}}function go(n,r){if(n&1){let t=M();a(0,"mat-chip",15),v("click",function(){let i=y(t).$implicit,o=p(2);return C(o.selectAuthor(i.id))}),a(1,"span",16),u(2),l()()}if(n&2){let t=r.$implicit,e=p(2);c("highlighted",e.filters.userId===t.id),s(2),O(t.full_name)}}function vo(n,r){if(n&1){let t=M();a(0,"button",17),v("click",function(){y(t);let i=p(2);return C(i.resetFilters())}),u(1),a(2,"mat-icon"),u(3,"clear"),l()()}if(n&2){let t=p().$implicit;s(),_(" ",t("blog.list.resetFilters")," ")}}function yo(n,r){if(n&1&&g(0,"img",26),n&2){let t=p().$implicit;c("appFallbackImage","account_circle")("src",t.profiles==null?null:t.profiles.avatar_url,V)}}function Co(n,r){if(n&1&&(N(0),a(1,"mat-card-content",18)(2,"mat-card-header")(3,"mat-card-title")(4,"a",19)(5,"h3"),u(6),l()()()(),a(7,"div",20),f(8,yo,1,2,"img",21),a(9,"span"),u(10),l()(),a(11,"div",22),u(12),l(),a(13,"div",23)(14,"a",24),u(15),q(16,"date"),l(),a(17,"a",24),u(18),l()()(),g(19,"div",25),j()),n&2){let t,e=r.$implicit,i=p().$implicit;s(4),c("routerLink",U(13,_t,e.url)),s(2),O(e.title),s(2),c("ngIf",e.profiles==null?null:e.profiles.avatar_url),s(2),O((t=e.profiles==null?null:e.profiles.full_name)!==null&&t!==void 0?t:e.profiles==null?null:e.profiles.email),s(2),_(" ",e.description," "),s(2),c("routerLink",U(15,_t,e.url)),s(),_(" ",$(16,10,e.inserted_at,"longDate")," "),s(2),c("routerLink",U(17,_t,e.url)),s(),Wt(" ",e.comments.length," ",i("blog.list.comments")," ")}}function bo(n,r){if(n&1&&(a(0,"div",27),u(1),l()),n&2){let t=p().$implicit;s(),_(" ",t("blog.list.loading"),"... ")}}function xo(n,r){if(n&1&&(a(0,"div",28),u(1),l()),n&2){let t=p(2);s(),_(" ",t.error," ")}}function So(n,r){if(n&1&&(a(0,"div",29),u(1),l()),n&2){let t=p().$implicit;s(),_(" ",t("blog.list.end")," ")}}function wo(n,r){if(n&1&&(N(0),a(1,"mat-card",1)(2,"div",2)(3,"span",3),u(4),l(),a(5,"mat-card-content")(6,"mat-chip-set",4),f(7,_o,3,2,"mat-chip",5),l()()(),a(8,"div",6)(9,"span",3),u(10),l(),a(11,"mat-card-content")(12,"mat-chip-set",7),f(13,go,3,2,"mat-chip",5),l()()(),a(14,"div",8),f(15,vo,4,1,"button",9),l(),a(16,"div",10)(17,"span",3),u(18),l(),f(19,Co,20,19,"ng-container",11)(20,bo,2,1,"div",12)(21,xo,2,1,"div",13)(22,So,2,1,"div",14),l()(),j()),n&2){let t=r.$implicit,e=p();s(4),_("",t("blog.list.tags"),":"),s(3),c("ngForOf",e.tags),s(3),_("",t("blog.list.authors"),":"),s(3),c("ngForOf",e.authors),s(2),c("ngIf",e.filters.tag||e.filters.userId),s(3),_("",t("blog.list.articles"),":"),s(),c("ngForOf",e.articles),s(),c("ngIf",e.loading),s(),c("ngIf",e.error),s(),c("ngIf",e.allLoaded)}}var wn=(()=>{class n{articleService=d(ae);sanitizer=d(D);supabaseAuthService=d(P);scrollToEndService=d(Ue);router=d(L);route=d(Y);articles=[];authors=[];tags=[];filters={userId:"",tag:""};page=0;pageSize=5;loading=!1;allLoaded=!1;error=null;ngOnInit(){this.getAuthors(),this.getExistingTags(),this.restoreFiltersFromUrl(),this.scrollToEndService.scrolledToEnd.subscribe(()=>this.loadMore()),this.scrollToEndService.scrolledToEnd.emit()}loadMore(){if(this.loading||this.allLoaded)return;this.loading=!0;let t=this.page*this.pageSize;this.articleService.getAll(this.pageSize,t,this.filters).then(e=>{let i=e.data||[];this.articles=[...this.articles,...i],i.length<this.pageSize?this.allLoaded=!0:this.page++,this.loading=!1})}getAuthors(){return x(this,null,function*(){try{let e=(yield this.articleService.getAuthors()).data?.map(i=>i.profiles);this.authors=e||[]}catch(t){console.error("Error fetching authors:",t),this.error="Failed to load authors."}})}getExistingTags(){return x(this,null,function*(){try{let e=(yield this.articleService.getExisingTags()).data?.map(i=>i.tag);this.tags=e||[]}catch(t){console.error("Error fetching tags:",t),this.error="Failed to load tags."}})}selectTag(t){this.filters.tag=this.filters.tag===t?"":t,this.page=0,this.articles=[],this.allLoaded=!1,this.updateUrl(),this.loadMore()}selectAuthor(t,e=!0){this.filters.userId=this.filters.userId===t?"":t,this.page=0,this.articles=[],this.allLoaded=!1,this.updateUrl(),e&&this.loadMore()}resetFilters(){this.selectAuthor("",!1),this.selectTag("")}restoreFiltersFromUrl(){this.route.queryParams.subscribe(t=>{!t.tag&&!t.userId||(t.tag&&(this.filters.tag=JSON.parse(t.tag)),t.userId&&(this.filters.userId=JSON.parse(t.userId)),this.page=0,this.articles=[],this.allLoaded=!1,this.loadMore())})}updateUrl(){let t={tag:JSON.stringify(this.filters.tag),userId:JSON.stringify(this.filters.userId)};console.log("queryParams:",t),this.router.navigate([],{relativeTo:this.route,queryParams:t,queryParamsHandling:"merge"})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-blog-article-list"]],standalone:!0,features:[A],decls:1,vars:0,consts:[[4,"transloco"],["appearance","outlined"],[1,"pl"],[1,"text-xs","pl-1","lowercase"],["aria-label","Tag selection",1,"pt-2"],[3,"highlighted","click",4,"ngFor","ngForOf"],[1,"mt-1"],["aria-label","Author selection",1,"pt-2"],[1,"flex","justify-start"],["mat-button","","class","color-secondary",3,"click",4,"ngIf"],[1,"mt-8"],[4,"ngFor","ngForOf"],["class","loading-spinner",4,"ngIf"],["class","error-message",4,"ngIf"],["class","end-message",4,"ngIf"],[3,"click","highlighted"],[1,"text-xs"],["mat-button","",1,"color-secondary",3,"click"],[1,"mb-4"],[1,"cursor-pointer","block","link",3,"routerLink"],[1,"flex","gap-2","items-center","justify-start","color-secondary"],["class","rounded-full w-[24px] h-[24px]",3,"appFallbackImage","src",4,"ngIf"],[1,"content-text","mb-16","mt-8","text-xl"],[1,"flex","justify-between"],["routerLinkActive","item-selected",1,"color-secondary","pt-8","link",3,"routerLink"],[1,"post-separator","z-10"],[1,"rounded-full","w-[24px]","h-[24px]",3,"appFallbackImage","src"],[1,"loading-spinner"],[1,"error-message"],[1,"end-message"]],template:function(e,i){e&1&&f(0,wo,23,10,"ng-container",0)},dependencies:[oe,ie,ne,Le,De,S,K,Q,G,J,Z,X,ui,hi,B,ee,Ye,Qe,Ge,Sn,te,sn],styles:["mat-card-header[_ngcontent-%COMP%]{border:0px!important}.no-underline[_ngcontent-%COMP%]{text-decoration-line:none!important}.loading-spinner[_ngcontent-%COMP%], .end-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{text-align:center;padding:16px;font-size:14px}.error-message[_ngcontent-%COMP%]{color:red}.scroll-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.post-separator[_ngcontent-%COMP%]{height:1px;margin:16px 0}"]})}return n})();var Ze=(()=>{class n{relation="comments";_supabaseService=d(re);_supabaseAuthService=d(P);supabase=this._supabaseService.supabaseClient;constructor(){}post(t){return this.supabase.from(this.relation).upsert(t).select("*,profiles(*)")}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Je=class{id;article_id;user_id;content;created_at;updated_at;profiles};function Ao(n,r){if(n&1){let t=M();a(0,"div",4)(1,"div",7),g(2,"img",8),a(3,"mat-form-field",9)(4,"textarea",10),v("keydown",function(i){y(t);let o=p(2);return C(o.keyDown(i))}),l()()(),a(5,"div",11)(6,"button",12),v("click",function(){y(t);let i=p(2);return C(i.postComment())}),u(7),l()()()}if(n&2){let t=p().$implicit,e=p();s(2),rt("src",e.avatarUrl,V),s(2),c("formControl",e.newCommentFormControl),s(2),c("disabled",e.newCommentFormControl.invalid),s(),_(" ",t("blog.article.comments.post")," ")}}function Mo(n,r){n&1&&(a(0,"div",5)(1,"span",13),u(2,"Login to post a comment"),l()())}function Oo(n,r){if(n&1&&(a(0,"button",23)(1,"mat-icon"),u(2,"more_vert"),l()()),n&2){p();let t=me(12);c("matMenuTriggerFor",t)}}function To(n,r){if(n&1&&(a(0,"div",15)(1,"div",16)(2,"div",17),g(3,"img",18),a(4,"div",19)(5,"span"),u(6),l(),a(7,"span",20),u(8),q(9,"date"),l()(),f(10,Oo,3,1,"button",21),a(11,"mat-menu",null,0)(13,"button",22)(14,"mat-icon"),u(15,"edit"),l(),a(16,"span"),u(17,"Edit"),l()(),a(18,"button",22)(19,"mat-icon"),u(20,"delete"),l(),a(21,"span"),u(22,"Delete"),l()()()(),a(23,"div"),u(24),l()()()),n&2){let t=r.$implicit,e=p(3);s(3),rt("src",t.profiles==null?null:t.profiles.avatar_url,V),s(3),O(t.profiles==null?null:t.profiles.full_name),s(2),O($(9,5,t.created_at,"long")),s(2),c("ngIf",e.isCommentedByCurrentUser(t.profiles==null?null:t.profiles.id)),s(14),O(t.content)}}function Eo(n,r){if(n&1&&(a(0,"div",6),f(1,To,25,8,"div",14),l()),n&2){let t=p(2);s(),c("ngForOf",t.orderedByDateComments)}}function Io(n,r){if(n&1&&(a(0,"div",5),u(1),l()),n&2){let t=p().$implicit;s(),_(" ",t("blog.article.comments.empty")," ")}}function ko(n,r){if(n&1&&(N(0),a(1,"div",2)(2,"span",3),u(3,"Comments"),l(),f(4,Ao,8,4,"div",4)(5,Mo,3,0,"div",5)(6,Eo,2,1,"div",6)(7,Io,2,1,"div",5),l(),j()),n&2){let t=p();s(4),ce(t.supabaseAuthService.user()?4:5),s(2),ce(t.comments.length?6:7)}}var An=(()=>{class n{comments=[];articleId;newCommentFormControl=new ji;commentService=d(Ze);supabaseAuthService=d(P);get avatarUrl(){return this.supabaseAuthService.user()?.user_metadata.avatar_url}postComment(){return x(this,null,function*(){if(this.newCommentFormControl.invalid)return;let t=new Je;if(t.content=this.newCommentFormControl.value,t.article_id=this.articleId,t.user_id=this.supabaseAuthService.user()?.id,!t)return;this.newCommentFormControl.setValue("");let e=yield this.commentService.post(t);this.comments.push(e.data[0]),this.newCommentFormControl.reset()})}ngOnInit(){this.newCommentFormControl.addValidators(H.required)}keyDown(t){t.key==="Enter"&&(t.metaKey||t.ctrlKey)&&this.postComment()}get orderedByDateComments(){return this.comments.sort((t,e)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())}isCommentedByCurrentUser(t){return this.supabaseAuthService.user()?.id===t}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-article-comments"]],inputs:{comments:"comments",articleId:"articleId"},standalone:!0,features:[A],decls:1,vars:0,consts:[["menu","matMenu"],[4,"transloco"],[1,"flex","flex-col","gap-8","mt-32"],[1,"text-2xl"],[1,"flex","flex-col","gap-2","flex-auto"],[1,"flex","justify-center"],[1,"flex","flex-col","gap-16"],[1,"flex","flex-row","gap-2"],[1,"rounded-full","w-12","h-12","mat-elevation-z2",3,"src"],["appearance","outline",1,"w-full"],["matInput","",1,"resize-none",3,"keydown","formControl"],[1,"flex","justify-end"],["mat-button","","color","primary",1,"xs:w-full","w-auto",3,"click","disabled"],[1,"text-xs"],["class","flex flex-row gap-4 items-center flex-auto",4,"ngFor","ngForOf"],[1,"flex","flex-row","gap-4","items-center","flex-auto"],[1,"flex","flex-col","gap-4","flex-auto"],[1,"flex","flex-row","items-center","gap-2","text-xs","menu-container","flex-auto"],[1,"rounded-full","w-8","h-8","mat-elevation-z4",3,"src"],[1,"flex","flex-col","flex-auto"],[1,"font-light"],["mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item",""],["mat-icon-button","",3,"matMenuTriggerFor"]],template:function(e,i){e&1&&f(0,ko,8,2,"ng-container",1)},dependencies:[He,ze,je,Ve,Ne,Wi,S,K,Q,G,B,ee,$e,qe,J,Z,Pe,te,Be,Li,Di,Bi],styles:[".menu-container[_ngcontent-%COMP%]{line-height:2}"]})}return n})();var Fo=()=>[];function Po(n,r){if(n&1&&(a(0,"div",0),g(1,"app-blog-article-view",1)(2,"app-article-comments",2),l()),n&2){let t,e=p();s(),c("article",e.article),s(),c("articleId",e.article.id)("comments",(t=e.article.comments)!==null&&t!==void 0?t:Te(3,Fo))}}var Mn=(()=>{class n{articleService=d(ae);commentService=d(Ze);route=d(Y);router=d(L);snackBar=d(Ke);article=null;url=this.route.snapshot.params.url;comments=[];ngOnInit(){return x(this,null,function*(){this.url=this.route.snapshot.params.url,yield this.getArticle()})}getArticle(){return x(this,null,function*(){if(!this.url){this.article={};return}let t=(yield this.articleService.getByUrl(this.url)).data?.[0];t&&(this.article=t??{})})}openSnackBar(t){this.snackBar.open(t,"")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-blog-article"]],standalone:!0,features:[A],decls:1,vars:1,consts:[[1,"flex","flex-col"],[3,"article"],[3,"articleId","comments"]],template:function(e,i){e&1&&f(0,Po,3,4,"div",0),e&2&&ce(i.article?0:-1)},dependencies:[S,X,Xe,An],encapsulation:2})}return n})();var On=[{path:"resume",loadComponent:()=>import("./chunk-TQBWNMLD.js").then(n=>n.ResumeComponent),pathMatch:"full"},{path:"about",loadComponent:()=>import("./chunk-XVM2NEYA.js").then(n=>n.AboutComponent),pathMatch:"full"},{path:"blog",loadComponent:()=>import("./chunk-PTCAILQ7.js").then(n=>n.BlogComponent),children:[{path:"",component:wn,pathMatch:"full"},{path:"new",component:ft,pathMatch:"full"},{path:":id/edit",component:ft,pathMatch:"full",canDeactivate:[xn]},{path:":url",component:Mn,pathMatch:"full"},{path:"**",redirectTo:"",pathMatch:"full"}]},{path:"heart-love",loadComponent:()=>import("./chunk-6IQX7RXJ.js").then(n=>n.HeartLoveComponent),pathMatch:"full"},{path:"manage-profile",loadComponent:()=>import("./chunk-U3ZLXI2V.js").then(n=>n.AccountManagerComponent)},{path:"**",redirectTo:"about",pathMatch:"full"}];var Tn=(()=>{class n{http=d(Jt);getTranslation(t){return this.http.get(`/assets/i18n/${t}.json`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var En=nn,In={providers:[Mi({config:{availableLangs:En,defaultLang:"en",reRenderOnLangChange:!0,prodMode:!Gt()},loader:Tn}),Qt({eventCoalescing:!0}),fi(On),{provide:Yt,useClass:Xt},oi(),ei(ti()),un(),{provide:Kt,useFactory:(n,r,t,e)=>()=>x(void 0,null,function*(){e.initializeSupabase(),En.forEach(i=>t.load(i).subscribe()),n.initializeTranslation(),r.initializeTheme()}),deps:[tn,en,Ai,re],multi:!0},{provide:mn,useValue:{duration:2e3}}]};ni(dn,In).catch(n=>console.error(n));
