import{a as se,b as E,c as de,d as ue,e as k,f as Mt,g as Ot,h as xt,i as Tt,j as Et,k as kt,l as Ft,m as he,n as It,o as Pt,p as Rt,q as fe,s as Lt,t as Bt,u as ye}from"./chunk-6Q5T3766.js";import"./chunk-X5YLR3NI.js";import"./chunk-KZNYJVJH.js";import"./chunk-6FV3HNTJ.js";import{a as Dt,b as ge,c as _e,d as ve}from"./chunk-SEZJVF6T.js";import{B as At,E as wt,F as me,b as ut,e as ae,l as gt,m as W,o as _t,p as vt,s as yt,t as bt,v as St,w as Ct,x as le,y as ce,z as pe}from"./chunk-VHKZYHWS.js";import{$ as z,J as Me,L as nt,M as at,O as st,Q as V,S as lt,T as ct,U as N,V as pt,W as mt,Y as dt,Z as j,_ as oe,ba as ne,ca as H,ha as ht,qa as Oe,ta as ft,x as Y}from"./chunk-KZXJN4PA.js";import"./chunk-IX6G3U3V.js";import{a as et,b as re,c as tt,d as L,e as it,f as rt,g as ot,h as B}from"./chunk-EQMHOV5E.js";import{a as Ue,b as Ge,c as $e,d as Xe,e as Ze,g as T,h as Je}from"./chunk-HNUNTI5B.js";import{d as we,f as qe,h as Ke,k as Ye,l as ee,m as te,p as ie,q as v}from"./chunk-H3ISBFJT.js";import{$ as G,Bc as Qe,Ca as be,Cc as K,Gb as n,Hb as a,Ib as f,Jb as Se,Ka as Ie,Kb as Ce,Lb as R,Qb as b,Sb as d,X as Ee,Xa as X,Ya as Pe,Yb as w,Zb as M,_ as P,_b as O,ab as l,ba as ke,bb as q,cb as Re,cc as m,dc as S,ea as s,eb as De,ec as x,fc as Ve,gb as Le,gc as Ne,hc as je,ia as y,ib as Be,ic as Ae,ja as $,jc as C,kc as ze,lc as D,ma as Fe,oc as Z,qc as J,sa as g,ta as _,uc as He,vb as h,xb as p,zc as We}from"./chunk-RO5JA52M.js";import{a as I,i as u}from"./chunk-ODN5LVDJ.js";var Jt=["container"],Vt=(()=>{class i{matIconRegistry;domSanitizer;container;sidenavContainerService=s(Ot);router=s(L);navbarService=s(Mt);scrollPersistenceService=s(It);routerSubscription;customIcons=["github","linkedin","stackoverflow","cow","heart","heart_fill"];constructor(e,t){this.matIconRegistry=e,this.domSanitizer=t,this.customIcons.forEach(r=>{this.matIconRegistry.addSvgIcon(r,this.domSanitizer.bypassSecurityTrustResourceUrl(`assets/images/${r}.svg`))})}get scrollKey(){return this.router.url}ngOnInit(){this.router.events.subscribe(e=>{if(e instanceof et&&this.container){let t=this.scrollPersistenceService.getScrollPosition(this.scrollKey);t!==null?this.container.nativeElement.scrollTop=t:this.container.nativeElement.scrollTop=0}}),this.matIconRegistry.setDefaultFontSetClass("material-symbols-outlined")}ngAfterViewInit(){this.container.nativeElement.addEventListener("scroll",()=>{let e=this.container.nativeElement.scrollTop;this.navbarService.setScrollTop(e)})}static \u0275fac=function(t){return new(t||i)(q(lt),q(T))};static \u0275cmp=y({type:i,selectors:[["app-root"]],viewQuery:function(t,r){if(t&1&&w(Jt,5),t&2){let c;M(c=O())&&(r.container=c.first)}},standalone:!0,features:[Ae([]),C],decls:7,vars:0,consts:[["container",""],["appScrollToEnd","",1,"app-container","overflow-y-scroll","overflow-x-hidden","h-screen-dvh","flex","flex-col"],[1,"grow"]],template:function(t,r){t&1&&(n(0,"app-sidenav-container")(1,"div",1,0),f(3,"app-navbar"),n(4,"div",2),f(5,"router-outlet"),a(),f(6,"app-footer"),a()())},dependencies:[tt,kt,ut,xt,v,he],styles:[".app-container[_ngcontent-%COMP%]{height:100dvh}#container[_ngcontent-%COMP%]{scroll-behavior:smooth}"]})}return i})();var ei="@",ti=(()=>{let o=class o{constructor(t,r,c,A,U){this.doc=t,this.delegate=r,this.zone=c,this.animationType=A,this.moduleImpl=U,this._rendererFactoryPromise=null,this.scheduler=s(De,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-666RGPPI.js").then(r=>r)).catch(r=>{throw new Ee(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:c})=>{this._engine=r(this.animationType,this.doc);let A=new c(this.delegate,this._engine,this.zone);return this.delegate=A,A})}createRenderer(t,r){let c=this.delegate.createRenderer(t,r);if(c.\u0275type===0)return c;typeof c.throwOnSyntheticProps=="boolean"&&(c.throwOnSyntheticProps=!1);let A=new xe(c);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(U=>{let Xt=U.createRenderer(t,r);A.use(Xt),this.scheduler?.notify(9)}).catch(U=>{A.use(c)}),A}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};o.\u0275fac=function(r){Re()},o.\u0275prov=P({token:o,factory:o.\u0275fac});let i=o;return i})(),xe=class{constructor(o){this.delegate=o,this.replay=[],this.\u0275type=1}use(o){if(this.delegate=o,this.replay!==null){for(let e of this.replay)e(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,e){return this.delegate.createElement(o,e)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,e){this.delegate.appendChild(o,e)}insertBefore(o,e,t,r){this.delegate.insertBefore(o,e,t,r)}removeChild(o,e,t){this.delegate.removeChild(o,e,t)}selectRootElement(o,e){return this.delegate.selectRootElement(o,e)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,e,t,r){this.delegate.setAttribute(o,e,t,r)}removeAttribute(o,e,t){this.delegate.removeAttribute(o,e,t)}addClass(o,e){this.delegate.addClass(o,e)}removeClass(o,e){this.delegate.removeClass(o,e)}setStyle(o,e,t,r){this.delegate.setStyle(o,e,t,r)}removeStyle(o,e,t){this.delegate.removeStyle(o,e,t)}setProperty(o,e,t){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(o,e,t)),this.delegate.setProperty(o,e,t)}setValue(o,e){this.delegate.setValue(o,e)}listen(o,e,t){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(o,e,t)),this.delegate.listen(o,e,t)}shouldReplay(o){return this.replay!==null&&o.startsWith(ei)}};function Nt(i="animations"){return Be("NgAsyncAnimations"),Fe([{provide:Le,useFactory:(o,e,t)=>new ti(o,e,t,i),deps:[we,Xe,be]},{provide:Ie,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var si=new ke("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let i=s(Oe);return()=>i.scrollStrategies.reposition()}});function li(i){return()=>i.scrollStrategies.reposition()}var ci={provide:si,deps:[Oe],useFactory:li};var jt=(()=>{let o=class o{};o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=$({type:o}),o.\u0275inj=G({providers:[ci],imports:[ft,Me,Y,v,ht,Me,Y]});let i=o;return i})();var Q=(()=>{class i{_supabaseService=s(ue);_supabaseAuthService=s(k);supabase=this._supabaseService.supabaseClient;constructor(){}post(e){return e.user_id=this._supabaseAuthService.user()?.id,this.supabase.from("articles").upsert(e).select("*,profiles(*)")}put(e,t){return this.supabase.from("articles").update(t).eq("id",e).select("*,profiles(*)")}delete(e){return this.supabase.from("articles").delete().eq("id",e)}get(e){return this.supabase.from("articles").select("*,profiles(*)").eq("id",e)}getAll(e,t){return this.supabase.from("articles").select("*,profiles(*)").order("updated_at",{ascending:!1}).range(t,t+e-1)}getAuthors(){return this.supabase.from("unique_authors").select("*,profiles(*)")}getTags(){return this.supabase.from("unique_tags").select("tag")}static \u0275fac=function(t){return new(t||i)};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var di=["editor"],ui=i=>({"opacity-0":i}),hi=()=>({standalone:!0});function fi(i,o){if(i&1){let e=R();n(0,"mat-chip",24),b("click",function(){let r=g(e).$implicit,c=d(2);return _(c.onRemoveTag(r))}),n(1,"div",25)(2,"span",26),m(3),a(),n(4,"button",27),b("click",function(){let r=g(e).$implicit,c=d(2);return _(c.onRemoveTag(r))}),n(5,"mat-icon"),m(6,"cancel"),a()()()()}if(i&2){let e=o.$implicit;l(3),S(e)}}function gi(i,o){if(i&1){let e=R();n(0,"button",28),b("click",function(){g(e);let r=d(2);return _(r.onDelete())}),m(1," Delete "),a()}}function _i(i,o){if(i&1){let e=R();n(0,"button",29),b("click",function(){g(e);let r=d(2);return _(r.onRestore())}),m(1," Restore "),a()}if(i&2){let e=d(2);p("disabled",e.articleForm.pristine)}}function vi(i,o){if(i&1&&(n(0,"p",32),m(1),a()),i&2){let e=o.$implicit;l(),x(" * ",e," ")}}function yi(i,o){if(i&1&&(n(0,"div",30),h(1,vi,2,1,"p",31),a()),i&2){let e=d(2);l(),p("ngForOf",e.errorMessages)}}function bi(i,o){if(i&1){let e=R();n(0,"form",3),b("ngSubmit",function(){g(e);let r=d();return _(r.onSubmit())}),n(1,"mat-card-header")(2,"mat-card-title")(3,"div",4)(4,"span",5),m(5," * "),a(),n(6,"mat-form-field",6),f(7,"textarea",7,0),a()()()(),n(9,"div",8),f(10,"app-wysiwyg-editor",9),n(11,"div",10)(12,"div")(13,"mat-form-field",11)(14,"input",12),je("ngModelChange",function(r){g(e);let c=d();return Ne(c.newTag,r)||(c.newTag=r),_(r)}),b("keydown",function(r){g(e);let c=d();return _(c.onAddTag(r))})("keydown.enter",function(r){return g(e),_(r.preventDefault())}),a(),n(15,"button",13),b("click",function(){g(e);let r=d();return _(r.onAddTag())}),n(16,"mat-icon"),m(17,"add"),a()()()(),n(18,"mat-chip-set",14),h(19,fi,7,1,"mat-chip",15),a()(),n(20,"div",16)(21,"div",17),h(22,gi,2,0,"button",18)(23,_i,2,1,"button",19),a(),n(24,"div",20)(25,"button",21),b("click",function(){g(e);let r=d();return _(r.toggleEdit())}),m(26," Preview "),a(),n(27,"button",22),m(28," Save "),a()()()(),h(29,yi,2,1,"div",23),a()}if(i&2){let e,t=d();p("formGroup",t.articleForm),l(4),p("ngClass",D(12,ui,t.articleForm.pristine)),l(3),p("placeholder","Title")("maxLength",100),l(7),p("appTogglablePlaceholder","New tag"),Ve("ngModel",t.newTag),p("ngModelOptions",ze(14,hi)),l(5),p("ngForOf",t.tags==null?null:t.tags.value),l(3),p("ngIf",t.id),l(),p("ngIf",t.id),l(4),p("disabled",t.articleForm.pristine),l(2),p("ngIf",(e=t.articleForm.get("title"))==null?null:e.invalid)}}var Te=(()=>{class i{editor;articleService=s(Q);route=s(re);formBuilder=s(le);matDialog=s(ae);router=s(L);snackBar=s(fe);sanitizer=s(T);cdRef=s(K);newTag="";supabaseAuthService=s(k);existingTags=[];get article(){return this._article}set article(e){this.sanitizeHtml(e),this._article=e}_article={};editorInitialized=!1;articleForm;editorApiKey=de.tinyMicApiKeys;errorMessages=[];id=+this.route.snapshot.params.id;get content(){return this.articleForm.get("content")}get title(){return this.articleForm.get("title")}get tags(){return this.articleForm.get("tags")}ngOnInit(){this.id=+this.route.snapshot.params.id,this.getArticle(),this.getTags()}getTags(){return u(this,null,function*(){let e=(yield this.articleService.getTags()).data})}back(e=!1){return u(this,null,function*(){this.articleForm.dirty&&!e&&!(yield this.matDialog.open(E,{data:{title:"Unsaved changes",text:"Are you sure you want to leave this page?",confirmText:"Leave"}}).afterClosed().toPromise())||this.router.navigate(["/blog"])})}createForm(e={}){this.articleForm=this.formBuilder.group({title:[e?.title,W.required],content:[e?.content,W.required],tags:[e?.tags||[]]})}getArticle(){return u(this,null,function*(){if(!this.id){this.createForm();return}let e=(yield this.articleService.get(this.id)).data?.[0];e&&(this.article=e??{},this.createForm(e))})}sanitizeHtml(e){e.contentSafeHtml=this.sanitizer.bypassSecurityTrustHtml(e.content||"")}onAddTag(e){if(e&&e.key!=="Enter")return;let t=this.tags?.value||[];!this.newTag||t.includes(this.newTag)||(t.push(this.newTag),this.tags?.patchValue(t),this.articleForm.markAsDirty(),this.newTag="")}onRemoveTag(e){let t=this.tags?.value||[],r=t.indexOf(e);r!==-1&&(t.splice(r,1),this.tags?.patchValue(t))}onDelete(){return u(this,null,function*(){(yield this.matDialog.open(E).afterClosed().toPromise())&&(yield this.articleService.delete(this.id),this.openSnackBar("Article deleted"),this.back(!0))})}onRestore(){return u(this,null,function*(){(yield this.matDialog.open(E,{data:{title:"Restore article",text:"Are you sure you want to restore this article?",confirmText:"Restore"}}).afterClosed().toPromise())&&(yield this.getArticle(),this.openSnackBar("Article restored"))})}openSnackBar(e){this.snackBar.open(e,"")}onSubmit(){return u(this,null,function*(){this.errorMessages=[],this.articleForm.get("title")?.patchValue(this.title?.value?.trim());let e=this.articleForm.errors;if(e&&(this.errorMessages=Object.keys(e).map(t=>e[t])),!this.articleForm.invalid){if(this.article.title=this.title?.value,this.article.content=this.content?.value,this.article.tags=this.tags?.value,this.id)yield this.articleService.put(this.id,this.articleForm.value),this.openSnackBar("Article saved");else{let t=yield this.articleService.post(this.articleForm.value);t&&(this.id=t.data?.[0].id),this.router.navigate(["/blog/"+this.id+"/edit"]),this.openSnackBar("Article created")}this.articleForm.reset(this.articleForm.value),this.articleForm.markAsPristine()}})}toggleEdit(){this.articleForm.dirty&&(this.article=I(I({},this.articleForm.value),this.article))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-blog-article"]],viewQuery:function(t,r){if(t&1&&w(di,5),t&2){let c;M(c=O())&&(r.editor=c.first)}},standalone:!0,features:[C],decls:3,vars:2,consts:[["input",""],[1,"h-full",3,"appearance"],["class","flex flex-col h-full",3,"formGroup","ngSubmit",4,"ngIf"],[1,"flex","flex-col","h-full",3,"ngSubmit","formGroup"],[1,"flex","sm:flex-row","items-start","gap-1","flex-col","justify-between","flex-wrap"],[1,"text-end","w-full","text-2xl",3,"ngClass"],["appearance","outline",1,"w-full"],["cdkTextareaAutosize","","matInput","","formControlName","title",3,"placeholder","maxLength"],[1,"grow"],["placeholder","Content","formControlName","content"],[1,"mt-8","flex","flex-col"],["appearance","outline"],["matInput","",3,"ngModelChange","keydown","keydown.enter","appTogglablePlaceholder","ngModel","ngModelOptions"],["matSuffix","","mat-icon-button","","type","button",1,"mr-2",3,"click"],[1,"pt-2"],[3,"click",4,"ngFor","ngForOf"],[1,"flex","sm:flex-row","flex-col-reverse","justify-between","gap-4","pt-4"],[1,"flex","sm:flex-row","flex-col-reverse","justify-start","gap-4"],["color","warn","mat-button","","type","button",3,"click",4,"ngIf"],["mat-button","","type","button",3,"disabled","click",4,"ngIf"],[1,"flex","sm:flex-row","flex-col-reverse","justify-end","gap-4"],["mat-button","","type","button",3,"click"],["mat-flat-button","",3,"disabled"],["class","flex flex-col items-end justify-end pt-4",4,"ngIf"],[3,"click"],[1,"flex","flex-row","justify-start","items-center"],[1,"text-xs"],["matChipRemove","","type","button",3,"click"],["color","warn","mat-button","","type","button",3,"click"],["mat-button","","type","button",3,"click","disabled"],[1,"flex","flex-col","items-end","justify-end","pt-4"],["class","color-error",4,"ngFor","ngForOf"],[1,"color-error"]],template:function(t,r){t&1&&(n(0,"mat-card",1)(1,"mat-card-content"),h(2,bi,30,15,"form",2),a()()),t&2&&(p("appearance","outlined"),l(2),p("ngIf",r.articleForm&&r.article))},dependencies:[v,Ye,ee,te,ce,bt,gt,_t,vt,yt,pe,St,Ct,V,nt,st,N,ct,ye,Bt,wt,At,Lt,H,j,z,ne,oe,me,se,jt,ve,ge,Dt,_e,Pt,Ft,B],styles:["mat-card-header[_ngcontent-%COMP%]{padding-right:0;padding-top:0}"]})}return i})();var Wt=(()=>{let o=class o{};o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=$({type:o}),o.\u0275inj=G({imports:[v,Y]});let i=o;return i})();var Qt=i=>["/blog",i],Si=i=>["/blog",i,"edit"];function Ci(i,o){if(i&1&&(n(0,"mat-chip")(1,"span",12),m(2),a()()),i&2){let e=o.$implicit;l(2),S(e)}}function Ai(i,o){if(i&1&&(n(0,"mat-chip")(1,"span",12),m(2),a()()),i&2){let e=o.$implicit;l(2),S(e.full_name)}}function wi(i,o){if(i&1&&(n(0,"a",20),m(1," Read more... "),a()),i&2){let e=d().$implicit;p("routerLink",D(1,Qt,e.id))}}function Mi(i,o){if(i&1&&(n(0,"div",21)(1,"a",22),m(2," Edit "),a()()),i&2){let e=d().$implicit;l(),p("routerLink",D(1,Si,e.id))}}function Oi(i,o){if(i&1&&(Se(0),n(1,"mat-card-content",13)(2,"mat-card-header")(3,"mat-card-title",14)(4,"span"),m(5),a()()(),n(6,"div",15)(7,"span"),m(8),a(),m(9," ~ "),n(10,"span"),m(11),Z(12,"date"),a()(),f(13,"div",16),h(14,wi,2,3,"a",17)(15,Mi,3,3,"div",18),a(),f(16,"div",19),Ce()),i&2){let e,t,r=o.$implicit,c=d(2);l(3),p("routerLink",D(10,Qt,r.id)),l(2),S(r.title),l(3),S((e=r.profiles==null?null:r.profiles.full_name)!==null&&e!==void 0?e:r.profiles==null?null:r.profiles.email),l(3),S(J(12,7,r.inserted_at,"longDate")),l(2),p("innerHTML",r.contentSafeHtmlPreview,X),l(),p("ngIf",(r.content==null?null:r.content.length)>500),l(),p("ngIf",c.supabaseAuthService.user()&&(r.profiles==null?null:r.profiles.email)===((t=c.supabaseAuthService.user())==null?null:t.email))}}function xi(i,o){if(i&1&&(n(0,"div",23),m(1),a()),i&2){let e=d().$implicit;l(),x(" ",e("loading"),"... ")}}function Ti(i,o){if(i&1&&(n(0,"div",24),m(1),a()),i&2){let e=d(2);l(),x(" ",e.error," ")}}function Ei(i,o){i&1&&(n(0,"div",25),m(1," No more articles to load. "),a())}function ki(i,o){if(i&1&&(Se(0),n(1,"mat-card",1)(2,"div",2)(3,"span",3),m(4,"tags:"),a(),n(5,"mat-card-content")(6,"mat-chip-set",4),h(7,Ci,3,1,"mat-chip",5),a()()(),n(8,"div",6)(9,"span",3),m(10,"authors:"),a(),n(11,"mat-card-content")(12,"mat-chip-set",7),h(13,Ai,3,1,"mat-chip",5),a()()(),n(14,"div",8)(15,"span",3),m(16,"blog:"),a(),h(17,Oi,17,12,"ng-container",5)(18,xi,2,1,"div",9)(19,Ti,2,1,"div",10)(20,Ei,2,0,"div",11),a()(),Ce()),i&2){let e=d();l(7),p("ngForOf",e.tags),l(6),p("ngForOf",e.authors),l(4),p("ngForOf",e.articles),l(),p("ngIf",e.loading),l(),p("ngIf",e.error),l(),p("ngIf",e.allLoaded)}}var qt=(()=>{class i{articleService=s(Q);sanitizer=s(T);supabaseAuthService=s(k);scrollToEndService=s(he);articles=[];authors=[];tags=[];page=0;pageSize=2;loading=!1;allLoaded=!1;error=null;ngOnInit(){this.getAuthors(),this.getExistingTags(),this.scrollToEndService.scrolledToEnd.subscribe(()=>this.loadMore()),this.scrollToEndService.scrolledToEnd.emit()}loadMore(){if(this.loading||this.allLoaded)return;this.loading=!0;let e=this.page*this.pageSize;this.articleService.getAll(this.pageSize,e).then(t=>{let r=t.data||[];r.forEach(c=>{c.contentSafeHtmlPreview=this.sanitizer.bypassSecurityTrustHtml(c.content||"")}),this.articles=[...this.articles,...r],r.length<this.pageSize?this.allLoaded=!0:this.page++,this.loading=!1})}getAuthors(){return u(this,null,function*(){try{let t=(yield this.articleService.getAuthors()).data?.map(r=>r.profiles);this.authors=t||[]}catch(e){console.error("Error fetching authors:",e),this.error="Failed to load authors."}})}getExistingTags(){return u(this,null,function*(){try{let t=(yield this.articleService.getTags()).data?.map(r=>r.tag);this.tags=t||[]}catch(e){console.error("Error fetching tags:",e),this.error="Failed to load tags."}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-blog-article-list"]],standalone:!0,features:[C],decls:1,vars:0,consts:[[4,"transloco"],["appearance","outlined"],[1,"pl"],[1,"text-xs","pl-1"],["aria-label","Tag selection",1,"pt-2"],[4,"ngFor","ngForOf"],[1,"mt-1"],["aria-label","Author selection",1,"pt-2"],[1,"mt-8"],["class","loading-spinner",4,"ngIf"],["class","error-message",4,"ngIf"],["class","end-message",4,"ngIf"],[1,"text-xs"],[1,"mb-4"],["mat-button","",1,"cursor-pointer","hover:underline",3,"routerLink"],[1,"flex","gap-1","justify-start","items-center","text-xs","font-light"],[1,"content-text","mt-8","mb-4",3,"innerHTML"],["routerLinkActive","item-selected","class","hover:underline color-secondary pt-8",3,"routerLink",4,"ngIf"],["class","flex justify-end",4,"ngIf"],[1,"post-separator","z-10"],["routerLinkActive","item-selected",1,"hover:underline","color-secondary","pt-8",3,"routerLink"],[1,"flex","justify-end"],["routerLinkActive","item-selected","mat-button","",3,"routerLink"],[1,"loading-spinner"],[1,"error-message"],[1,"end-message"]],template:function(t,r){t&1&&h(0,ki,21,6,"ng-container",0)},dependencies:[H,j,z,ne,oe,v,ee,te,ie,V,at,B,it,rt,N,ve,ge,_e,Wt,mt],styles:["mat-card-header[_ngcontent-%COMP%]{border:0px!important}.no-underline[_ngcontent-%COMP%]{text-decoration-line:none!important}.content-text[_ngcontent-%COMP%]{line-height:1.6em;height:8em;overflow:hidden}.loading-spinner[_ngcontent-%COMP%], .end-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{text-align:center;padding:16px;font-size:14px}.error-message[_ngcontent-%COMP%]{color:red}.scroll-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.post-separator[_ngcontent-%COMP%]{height:1px;margin:16px 0}"]})}return i})();var Fi=["editor"],Kt=(()=>{class i{editor;articleService=s(Q);route=s(re);formBuilder=s(le);matDialog=s(ae);router=s(L);snackBar=s(fe);sanitizer=s(T);cdRef=s(K);supabaseAuthService=s(k);get article(){return this._article}set article(e){this.sanitizeHtml(e),this._article=e}_article={};editorInitialized=!1;articleForm;editorApiKey=de.tinyMicApiKeys;errorMessages=[];id=+this.route.snapshot.params.id;get content(){return this.articleForm.get("content")}get title(){return this.articleForm.get("title")}ngOnInit(){this.id=+this.route.snapshot.params.id,this.getArticle(!0)}initializeData(){return u(this,null,function*(){})}back(e=!1){return u(this,null,function*(){this.articleForm.dirty&&!e&&!(yield this.matDialog.open(E,{data:{title:"Unsaved changes",text:"Are you sure you want to leave this page?",confirmText:"Leave"}}).afterClosed().toPromise())||this.router.navigate(["/blog"])})}createForm(e={}){this.articleForm=this.formBuilder.group({title:[e?.title,W.required],content:[e?.content,W.required]})}getArticle(e=!1){return u(this,null,function*(){if(!this.id){this.createForm();return}let t=(yield this.articleService.get(this.id)).data?.[0];t&&(this.article=t??{},e&&this.createForm(t))})}sanitizeHtml(e){e.contentSafeHtml=this.sanitizer.bypassSecurityTrustHtml(e.content||"")}onDelete(){return u(this,null,function*(){(yield this.matDialog.open(E).afterClosed().toPromise())&&(yield this.articleService.delete(this.id),this.openSnackBar("Article deleted"),this.back(!0))})}onRestore(){return u(this,null,function*(){(yield this.matDialog.open(E,{data:{title:"Restore article",text:"Are you sure you want to restore this article?",confirmText:"Restore"}}).afterClosed().toPromise())&&(yield this.getArticle(!0),this.openSnackBar("Article restored"))})}openSnackBar(e){this.snackBar.open(e,"")}onSubmit(){return u(this,null,function*(){this.errorMessages=[],this.articleForm.get("title")?.patchValue(this.title?.value?.trim()),this.articleForm.get("content")?.patchValue(this.content?.value?.trim());let e=this.articleForm.errors;if(e&&(this.errorMessages=Object.keys(e).map(t=>e[t])),!this.articleForm.invalid){if(this.article.title=this.title?.value,this.article.content=this.content?.value,this.id)yield this.articleService.put(this.id,this.articleForm.value),this.openSnackBar("Article saved");else{let t=yield this.articleService.post(this.articleForm.value);t&&(this.id=t.data?.[0].id),this.router.navigate(["/blog/"+this.id+"/edit"]),this.openSnackBar("Article created")}this.articleForm.reset(this.articleForm.value)}})}toggleEdit(){this.articleForm.dirty&&(this.article=I(I({},this.articleForm.value),this.article))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-blog-article"]],viewQuery:function(t,r){if(t&1&&w(Fi,5),t&2){let c;M(c=O())&&(r.editor=c.first)}},standalone:!0,features:[C],decls:14,vars:9,consts:[[1,"h-full",3,"appearance"],[1,"flex","flex-col","justify-start","gap-6","mb-12","w-full"],[1,"flex","page-title","justify-start"],[1,"flex","flex-row","items","gap-2","items-center","text-ellipsis"],[1,"rounded-full","w-16","mat-elevation-z2",3,"src"],[1,"flex","flex-col"],[1,"font-light","text-sm"],[1,"content-text",3,"innerHTML"]],template:function(t,r){if(t&1&&(n(0,"mat-card",0)(1,"mat-card-content")(2,"div",1)(3,"h1",2),m(4),a(),n(5,"div",3),f(6,"img",4),n(7,"div",5)(8,"span"),m(9),a(),n(10,"span",6),m(11),Z(12,"date"),a()()()(),f(13,"div",7),a()()),t&2){let c;p("appearance","outlined"),l(4),x(" ",r.article.title," "),l(2),p("src",r.article.profiles==null?null:r.article.profiles.avatar_url,Pe),l(3),S((c=r.article.profiles==null?null:r.article.profiles.full_name)!==null&&c!==void 0?c:r.article.profiles==null?null:r.article.profiles.email),l(2),x(" ",J(12,6,r.article.inserted_at,"longDate")," "),l(2),p("innerHTML",r.article.contentSafeHtml,X)}},dependencies:[me,ce,V,N,ye,pe,v,ie,H,j,z,se,B],styles:["mat-card-content[_ngcontent-%COMP%]{padding-bottom:0!important}mat-card-header[_ngcontent-%COMP%]{border:0px!important}"]})}return i})();var Yt=[{path:"resume",loadComponent:()=>import("./chunk-RJMK3YOX.js").then(i=>i.ResumeComponent),pathMatch:"full"},{path:"about",loadComponent:()=>import("./chunk-UWJ33UFZ.js").then(i=>i.AboutComponent),pathMatch:"full"},{path:"blog",loadComponent:()=>import("./chunk-Q5RQB4Q2.js").then(i=>i.BlogComponent),children:[{path:"",component:qt,pathMatch:"full"},{path:"new",component:Te,pathMatch:"full"},{path:":id/edit",component:Te,pathMatch:"full"},{path:":id",component:Kt,pathMatch:"full"},{path:"**",redirectTo:"",pathMatch:"full"}]},{path:"heart-love",loadComponent:()=>import("./chunk-BYIWE7MC.js").then(i=>i.HeartLoveComponent),pathMatch:"full"},{path:"manage-profile",loadComponent:()=>import("./chunk-RIZYMMPO.js").then(i=>i.AccountManagerComponent)},{path:"**",redirectTo:"about",pathMatch:"full"}];var Ut=(()=>{class i{http=s(Ue);getTranslation(e){return this.http.get(`/assets/i18n/${e}.json`)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Gt=["en","es"],$t={providers:[dt({config:{availableLangs:Gt,defaultLang:"en",reRenderOnLangChange:!0,prodMode:!Qe()},loader:Ut}),We({eventCoalescing:!0}),ot(Yt),{provide:qe,useClass:Ke},Je(),Ge($e()),Nt(),{provide:He,useFactory:(i,o,e,t)=>()=>u(void 0,null,function*(){t.initializeSupabase(),Gt.forEach(r=>e.load(r).subscribe()),i.initializeTranslation(),o.initializeTheme()}),deps:[Et,Tt,pt,ue],multi:!0},{provide:Rt,useValue:{duration:2e3}}]};Ze(Vt,$t).catch(i=>console.error(i));
