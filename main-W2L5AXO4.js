import{a as pe,b as E,c as ge,d as _e,e as k,f as xt,g as Mt,h as Ot,i as Tt,j as Et,k as kt,l as It,m as Ft,n as fe,o as Pt,p as Rt,q as Dt,r as ve,t as Bt,u as Vt,v as Ce}from"./chunk-YFNTBYND.js";import"./chunk-X5YLR3NI.js";import"./chunk-U23AKWRA.js";import"./chunk-BJL4MWCN.js";import{a as Lt,b as ye,c as be,d as Se}from"./chunk-WRVWXK3O.js";import{B as At,E as wt,F as he,b as ut,e as ce,l as _t,m as W,o as ft,p as vt,s as yt,t as bt,v as St,w as Ct,x as me,y as de,z as ue}from"./chunk-GPGG75PD.js";import{$ as z,J as Me,L as at,M as st,O as lt,Q as V,S as ct,T as pt,U as N,V as mt,W as ae,Y as dt,Z as j,_ as se,ba as le,ca as H,ha as ht,qa as Oe,ta as gt,x as G}from"./chunk-YVS3AYDP.js";import"./chunk-IX6G3U3V.js";import{a as tt,b as oe,c as it,d as L,e as rt,f as nt,g as ot,h as B}from"./chunk-C3QMALJN.js";import{a as Ge,b as $e,c as Xe,d as Ze,e as Je,g as T,h as et}from"./chunk-XEMPOICU.js";import{d as xe,f as Ke,h as Ue,k as Ye,l as ie,m as re,p as ne,q as y}from"./chunk-7X4K5HU7.js";import{$ as X,Bc as qe,Ca as Ae,Cc as Y,Gb as a,Hb as s,Ib as _,Jb as K,Ka as Pe,Kb as U,Lb as R,Qb as S,Sb as m,X as ke,Xa as J,Ya as Re,Yb as x,Zb as M,_ as P,_b as O,ab as o,ba as Ie,bb as q,cb as De,cc as d,dc as C,ea as l,eb as Le,ec as h,fc as Ne,gb as Be,gc as je,hc as ze,ia as b,ib as Ve,ic as we,ja as Z,jc as A,kc as He,lc as D,ma as Fe,oc as ee,qc as te,sa as f,ta as v,uc as We,vb as g,xb as p,zc as Qe}from"./chunk-KI5IVZV6.js";import{a as F,i as u}from"./chunk-ODN5LVDJ.js";var ei=["container"],Nt=(()=>{class i{matIconRegistry;domSanitizer;container;sidenavContainerService=l(Mt);router=l(L);navbarService=l(xt);scrollPersistenceService=l(Pt);routerSubscription;customIcons=["github","linkedin","stackoverflow","cow","heart","heart_fill"];constructor(e,t){this.matIconRegistry=e,this.domSanitizer=t,this.customIcons.forEach(r=>{this.matIconRegistry.addSvgIcon(r,this.domSanitizer.bypassSecurityTrustResourceUrl(`assets/images/${r}.svg`))})}get scrollKey(){return this.router.url}ngOnInit(){this.router.events.subscribe(e=>{if(e instanceof tt&&this.container){let t=this.scrollPersistenceService.getScrollPosition(this.scrollKey);t!==null?this.container.nativeElement.scrollTop=t:this.container.nativeElement.scrollTop=0}}),this.matIconRegistry.setDefaultFontSetClass("material-symbols-outlined")}ngAfterViewInit(){this.container.nativeElement.addEventListener("scroll",()=>{let e=this.container.nativeElement.scrollTop;this.navbarService.setScrollTop(e)})}static \u0275fac=function(t){return new(t||i)(q(ct),q(T))};static \u0275cmp=b({type:i,selectors:[["app-root"]],viewQuery:function(t,r){if(t&1&&x(ei,5),t&2){let c;M(c=O())&&(r.container=c.first)}},standalone:!0,features:[we([]),A],decls:7,vars:0,consts:[["container",""],["appScrollToEnd","",1,"app-container","overflow-y-scroll","overflow-x-hidden","h-screen-dvh","flex","flex-col"],[1,"grow"]],template:function(t,r){t&1&&(a(0,"app-sidenav-container")(1,"div",1,0),_(3,"app-navbar"),a(4,"div",2),_(5,"router-outlet"),s(),_(6,"app-footer"),s()())},dependencies:[it,It,ut,Ot,y,fe],styles:[".app-container[_ngcontent-%COMP%]{height:100dvh}#container[_ngcontent-%COMP%]{scroll-behavior:smooth}"]})}return i})();var ti="@",ii=(()=>{let n=class n{constructor(t,r,c,w,$){this.doc=t,this.delegate=r,this.zone=c,this.animationType=w,this.moduleImpl=$,this._rendererFactoryPromise=null,this.scheduler=l(Le,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-SPEWKBFN.js").then(r=>r)).catch(r=>{throw new ke(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:c})=>{this._engine=r(this.animationType,this.doc);let w=new c(this.delegate,this._engine,this.zone);return this.delegate=w,w})}createRenderer(t,r){let c=this.delegate.createRenderer(t,r);if(c.\u0275type===0)return c;typeof c.throwOnSyntheticProps=="boolean"&&(c.throwOnSyntheticProps=!1);let w=new Te(c);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then($=>{let Zt=$.createRenderer(t,r);w.use(Zt),this.scheduler?.notify(9)}).catch($=>{w.use(c)}),w}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};n.\u0275fac=function(r){De()},n.\u0275prov=P({token:n,factory:n.\u0275fac});let i=n;return i})(),Te=class{constructor(n){this.delegate=n,this.replay=[],this.\u0275type=1}use(n){if(this.delegate=n,this.replay!==null){for(let e of this.replay)e(n);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}get destroyNode(){return this.delegate.destroyNode}appendChild(n,e){this.delegate.appendChild(n,e)}insertBefore(n,e,t,r){this.delegate.insertBefore(n,e,t,r)}removeChild(n,e,t){this.delegate.removeChild(n,e,t)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,t,r){this.delegate.setAttribute(n,e,t,r)}removeAttribute(n,e,t){this.delegate.removeAttribute(n,e,t)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,t,r){this.delegate.setStyle(n,e,t,r)}removeStyle(n,e,t){this.delegate.removeStyle(n,e,t)}setProperty(n,e,t){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(n,e,t)),this.delegate.setProperty(n,e,t)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,t){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(n,e,t)),this.delegate.listen(n,e,t)}shouldReplay(n){return this.replay!==null&&n.startsWith(ti)}};function jt(i="animations"){return Ve("NgAsyncAnimations"),Fe([{provide:Be,useFactory:(n,e,t)=>new ii(n,e,t,i),deps:[xe,Ze,Ae]},{provide:Pe,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var li=new Ie("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let i=l(Oe);return()=>i.scrollStrategies.reposition()}});function ci(i){return()=>i.scrollStrategies.reposition()}var pi={provide:li,deps:[Oe],useFactory:ci};var zt=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=Z({type:n}),n.\u0275inj=X({providers:[pi],imports:[gt,Me,G,y,ht,Me,G]});let i=n;return i})();var Q=(()=>{class i{_supabaseService=l(_e);_supabaseAuthService=l(k);supabase=this._supabaseService.supabaseClient;constructor(){}post(e){return e.user_id=this._supabaseAuthService.user()?.id,this.supabase.from("articles").upsert(e).select("*,profiles(*)")}put(e,t){return this.supabase.from("articles").update(t).eq("id",e).select("*,profiles(*)")}delete(e){return this.supabase.from("articles").delete().eq("id",e)}get(e){return this.supabase.from("articles").select("*,profiles(*)").eq("id",e)}getAll(e,t){return this.supabase.from("articles").select("*,profiles(*)").order("updated_at",{ascending:!1}).range(t,t+e-1)}getAuthors(){return this.supabase.from("unique_authors").select("*,profiles(*)")}getTags(){return this.supabase.from("unique_tags").select("tag")}static \u0275fac=function(t){return new(t||i)};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ui=["editor"],hi=i=>({"opacity-0":i}),gi=()=>({standalone:!0});function _i(i,n){if(i&1){let e=R();a(0,"mat-chip",25),S("click",function(){let r=f(e).$implicit,c=m(3);return v(c.onRemoveTag(r))}),a(1,"div",26)(2,"span",27),d(3),s(),a(4,"button",28),S("click",function(){let r=f(e).$implicit,c=m(3);return v(c.onRemoveTag(r))}),a(5,"mat-icon"),d(6,"cancel"),s()()()()}if(i&2){let e=n.$implicit;o(3),C(e)}}function fi(i,n){if(i&1){let e=R();a(0,"button",29),S("click",function(){f(e);let r=m(3);return v(r.onDelete())}),d(1),s()}if(i&2){let e=m(2).$implicit;o(),h(" ",e("blog.edit.delete")," ")}}function vi(i,n){if(i&1){let e=R();a(0,"button",30),S("click",function(){f(e);let r=m(3);return v(r.onRestore())}),d(1),s()}if(i&2){let e=m(2).$implicit,t=m();p("disabled",t.articleForm.pristine),o(),h(" ",e("blog.edit.restore")," ")}}function yi(i,n){if(i&1&&(a(0,"p",33),d(1),s()),i&2){let e=n.$implicit;o(),h(" * ",e," ")}}function bi(i,n){if(i&1&&(a(0,"div",31),g(1,yi,2,1,"p",32),s()),i&2){let e=m(3);o(),p("ngForOf",e.errorMessages)}}function Si(i,n){if(i&1){let e=R();a(0,"form",4),S("ngSubmit",function(){f(e);let r=m(2);return v(r.onSubmit())}),a(1,"mat-card-header")(2,"mat-card-title")(3,"div",5)(4,"span",6),d(5," * "),s(),a(6,"mat-form-field",7),_(7,"textarea",8,0),s()()()(),a(9,"div",9),_(10,"app-wysiwyg-editor",10),a(11,"div",11)(12,"div")(13,"mat-form-field",12)(14,"input",13),ze("ngModelChange",function(r){f(e);let c=m(2);return je(c.newTag,r)||(c.newTag=r),v(r)}),S("keydown",function(r){f(e);let c=m(2);return v(c.onAddTag(r))})("keydown.enter",function(r){return f(e),v(r.preventDefault())}),s(),a(15,"button",14),S("click",function(){f(e);let r=m(2);return v(r.onAddTag())}),a(16,"mat-icon"),d(17,"add"),s()()()(),a(18,"mat-chip-set",15),g(19,_i,7,1,"mat-chip",16),s()(),a(20,"div",17)(21,"div",18),g(22,fi,2,1,"button",19)(23,vi,2,2,"button",20),s(),a(24,"div",21)(25,"button",22),S("click",function(){f(e);let r=m(2);return v(r.toggleEdit())}),d(26),s(),a(27,"button",23),d(28),s()()()(),g(29,bi,2,1,"div",24),s()}if(i&2){let e,t=m().$implicit,r=m();p("formGroup",r.articleForm),o(4),p("ngClass",D(15,hi,r.articleForm.pristine)),o(3),p("placeholder",t("blog.edit.titlePlaceholder"))("maxLength",100),o(3),p("placeholder",t("blog.edit.contentPlaceholder")),o(4),p("appTogglablePlaceholder",t("blog.edit.tagsPlaceholder")),Ne("ngModel",r.newTag),p("ngModelOptions",He(17,gi)),o(5),p("ngForOf",r.tags==null?null:r.tags.value),o(3),p("ngIf",r.id),o(),p("ngIf",r.id),o(3),h(" ",t("blog.edit.preview")," "),o(),p("disabled",r.articleForm.pristine),o(),h(" ",t("blog.edit.save")," "),o(),p("ngIf",(e=r.articleForm.get("title"))==null?null:e.invalid)}}function Ci(i,n){if(i&1&&(K(0),a(1,"mat-card",2)(2,"mat-card-content"),g(3,Si,30,18,"form",3),s()(),U()),i&2){let e=m();o(),p("appearance","outlined"),o(2),p("ngIf",e.articleForm&&e.article)}}var Ee=(()=>{class i{editor;articleService=l(Q);route=l(oe);formBuilder=l(me);matDialog=l(ce);router=l(L);snackBar=l(ve);sanitizer=l(T);cdRef=l(Y);newTag="";supabaseAuthService=l(k);existingTags=[];get article(){return this._article}set article(e){this.sanitizeHtml(e),this._article=e}_article={};editorInitialized=!1;articleForm;editorApiKey=ge.tinyMicApiKeys;errorMessages=[];id=+this.route.snapshot.params.id;get content(){return this.articleForm.get("content")}get title(){return this.articleForm.get("title")}get tags(){return this.articleForm.get("tags")}ngOnInit(){this.id=+this.route.snapshot.params.id,this.getArticle(),this.getTags()}getTags(){return u(this,null,function*(){let e=(yield this.articleService.getTags()).data})}back(e=!1){return u(this,null,function*(){this.articleForm.dirty&&!e&&!(yield this.matDialog.open(E,{data:{title:"Unsaved changes",text:"Are you sure you want to leave this page?",confirmText:"Leave"}}).afterClosed().toPromise())||this.router.navigate(["/blog"])})}createForm(e={}){this.articleForm=this.formBuilder.group({title:[e?.title,W.required],content:[e?.content,W.required],tags:[e?.tags||[]]})}getArticle(){return u(this,null,function*(){if(!this.id){this.createForm();return}let e=(yield this.articleService.get(this.id)).data?.[0];e&&(this.article=e??{},this.createForm(e))})}sanitizeHtml(e){e.contentSafeHtml=this.sanitizer.bypassSecurityTrustHtml(e.content||"")}onAddTag(e){if(e&&e.key!=="Enter")return;let t=this.tags?.value||[];!this.newTag||t.includes(this.newTag)||(t.push(this.newTag),this.tags?.patchValue(t),this.articleForm.markAsDirty(),this.newTag="")}onRemoveTag(e){let t=this.tags?.value||[],r=t.indexOf(e);r!==-1&&(t.splice(r,1),this.tags?.patchValue(t))}onDelete(){return u(this,null,function*(){(yield this.matDialog.open(E).afterClosed().toPromise())&&(yield this.articleService.delete(this.id),this.openSnackBar("Article deleted"),this.back(!0))})}onRestore(){return u(this,null,function*(){(yield this.matDialog.open(E,{data:{title:"Restore article",text:"Are you sure you want to restore this article?",confirmText:"Restore"}}).afterClosed().toPromise())&&(yield this.getArticle(),this.openSnackBar("Article restored"))})}openSnackBar(e){this.snackBar.open(e,"")}onSubmit(){return u(this,null,function*(){this.errorMessages=[],this.articleForm.get("title")?.patchValue(this.title?.value?.trim());let e=this.articleForm.errors;if(e&&(this.errorMessages=Object.keys(e).map(t=>e[t])),!this.articleForm.invalid){if(this.article.title=this.title?.value,this.article.content=this.content?.value,this.article.tags=this.tags?.value,this.id)yield this.articleService.put(this.id,this.articleForm.value),this.openSnackBar("Article saved");else{let t=yield this.articleService.post(this.articleForm.value);t&&(this.id=t.data?.[0].id),this.router.navigate(["/blog/"+this.id+"/edit"]),this.openSnackBar("Article created")}this.articleForm.reset(this.articleForm.value),this.articleForm.markAsPristine()}})}toggleEdit(){this.articleForm.dirty&&(this.article=F(F({},this.articleForm.value),this.article))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["app-blog-article"]],viewQuery:function(t,r){if(t&1&&x(ui,5),t&2){let c;M(c=O())&&(r.editor=c.first)}},standalone:!0,features:[A],decls:1,vars:0,consts:[["input",""],[4,"transloco"],[1,"h-full",3,"appearance"],["class","flex flex-col h-full",3,"formGroup","ngSubmit",4,"ngIf"],[1,"flex","flex-col","h-full",3,"ngSubmit","formGroup"],[1,"flex","sm:flex-row","items-start","gap-1","flex-col","justify-between","flex-wrap"],[1,"text-end","w-full","text-2xl",3,"ngClass"],["appearance","outline",1,"w-full"],["cdkTextareaAutosize","","matInput","","formControlName","title",3,"placeholder","maxLength"],[1,"grow"],["formControlName","content",3,"placeholder"],[1,"mt-8","flex","flex-col"],["appearance","outline"],["matInput","",3,"ngModelChange","keydown","keydown.enter","appTogglablePlaceholder","ngModel","ngModelOptions"],["matSuffix","","mat-icon-button","","type","button",1,"mr-2",3,"click"],[1,"pt-2"],[3,"click",4,"ngFor","ngForOf"],[1,"flex","sm:flex-row","flex-col-reverse","justify-between","gap-4","pt-4"],[1,"flex","sm:flex-row","flex-col-reverse","justify-start","gap-4"],["color","warn","mat-button","","type","button",3,"click",4,"ngIf"],["mat-button","","type","button",3,"disabled","click",4,"ngIf"],[1,"flex","sm:flex-row","flex-col-reverse","justify-end","gap-4"],["mat-button","","type","button",3,"click"],["mat-flat-button","",3,"disabled"],["class","flex flex-col items-end justify-end pt-4",4,"ngIf"],[3,"click"],[1,"flex","flex-row","justify-start","items-center"],[1,"text-xs"],["matChipRemove","","type","button",3,"click"],["color","warn","mat-button","","type","button",3,"click"],["mat-button","","type","button",3,"click","disabled"],[1,"flex","flex-col","items-end","justify-end","pt-4"],["class","color-error",4,"ngFor","ngForOf"],[1,"color-error"]],template:function(t,r){t&1&&g(0,Ci,4,2,"ng-container",1)},dependencies:[y,Ye,ie,re,de,bt,_t,ft,vt,yt,ue,St,Ct,V,at,lt,N,pt,Ce,Vt,wt,At,Bt,H,j,z,le,se,he,pe,zt,Se,ye,Lt,be,Rt,Ft,B,ae],styles:["mat-card-header[_ngcontent-%COMP%]{padding-right:0;padding-top:0}"]})}return i})();var Qt=(()=>{let n=class n{};n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=Z({type:n}),n.\u0275inj=X({imports:[y,G]});let i=n;return i})();var qt=i=>["/blog",i],Ai=i=>["/blog",i,"edit"];function wi(i,n){if(i&1&&(a(0,"mat-chip")(1,"span",12),d(2),s()()),i&2){let e=n.$implicit;o(2),C(e)}}function xi(i,n){if(i&1&&(a(0,"mat-chip")(1,"span",12),d(2),s()()),i&2){let e=n.$implicit;o(2),C(e.full_name)}}function Mi(i,n){if(i&1&&(a(0,"a",20),d(1),s()),i&2){let e=m().$implicit,t=m().$implicit;p("routerLink",D(2,qt,e.id)),o(),h(" ",t("blog.list.readMore"),"... ")}}function Oi(i,n){if(i&1&&(a(0,"div",21)(1,"a",22),d(2),s()()),i&2){let e=m().$implicit,t=m().$implicit;o(),p("routerLink",D(2,Ai,e.id)),o(),h(" ",t("blog.list.edit")," ")}}function Ti(i,n){if(i&1&&(K(0),a(1,"mat-card-content",13)(2,"mat-card-header")(3,"mat-card-title",14)(4,"span"),d(5),s()()(),a(6,"div",15)(7,"span"),d(8),s(),d(9," ~ "),a(10,"span"),d(11),ee(12,"date"),s()(),_(13,"div",16),g(14,Mi,2,4,"a",17)(15,Oi,3,4,"div",18),s(),_(16,"div",19),U()),i&2){let e,t,r=n.$implicit,c=m(2);o(3),p("routerLink",D(10,qt,r.id)),o(2),C(r.title),o(3),C((e=r.profiles==null?null:r.profiles.full_name)!==null&&e!==void 0?e:r.profiles==null?null:r.profiles.email),o(3),C(te(12,7,r.inserted_at,"longDate")),o(2),p("innerHTML",r.contentSafeHtmlPreview,J),o(),p("ngIf",(r.content==null?null:r.content.length)>500),o(),p("ngIf",c.supabaseAuthService.user()&&(r.profiles==null?null:r.profiles.email)===((t=c.supabaseAuthService.user())==null?null:t.email))}}function Ei(i,n){if(i&1&&(a(0,"div",23),d(1),s()),i&2){let e=m().$implicit;o(),h(" ",e("blog.list.loading"),"... ")}}function ki(i,n){if(i&1&&(a(0,"div",24),d(1),s()),i&2){let e=m(2);o(),h(" ",e.error," ")}}function Ii(i,n){if(i&1&&(a(0,"div",25),d(1),s()),i&2){let e=m().$implicit;o(),h(" ",e("blog.list.end")," ")}}function Fi(i,n){if(i&1&&(K(0),a(1,"mat-card",1)(2,"div",2)(3,"span",3),d(4),s(),a(5,"mat-card-content")(6,"mat-chip-set",4),g(7,wi,3,1,"mat-chip",5),s()()(),a(8,"div",6)(9,"span",3),d(10),s(),a(11,"mat-card-content")(12,"mat-chip-set",7),g(13,xi,3,1,"mat-chip",5),s()()(),a(14,"div",8)(15,"span",3),d(16),s(),g(17,Ti,17,12,"ng-container",5)(18,Ei,2,1,"div",9)(19,ki,2,1,"div",10)(20,Ii,2,1,"div",11),s()(),U()),i&2){let e=n.$implicit,t=m();o(4),h("",e("blog.list.tags"),":"),o(3),p("ngForOf",t.tags),o(3),h("",e("blog.list.authors"),":"),o(3),p("ngForOf",t.authors),o(3),h("",e("blog.list.articles"),":"),o(),p("ngForOf",t.articles),o(),p("ngIf",t.loading),o(),p("ngIf",t.error),o(),p("ngIf",t.allLoaded)}}var Kt=(()=>{class i{articleService=l(Q);sanitizer=l(T);supabaseAuthService=l(k);scrollToEndService=l(fe);articles=[];authors=[];tags=[];page=0;pageSize=2;loading=!1;allLoaded=!1;error=null;ngOnInit(){this.getAuthors(),this.getExistingTags(),this.scrollToEndService.scrolledToEnd.subscribe(()=>this.loadMore()),this.scrollToEndService.scrolledToEnd.emit()}loadMore(){if(this.loading||this.allLoaded)return;this.loading=!0;let e=this.page*this.pageSize;this.articleService.getAll(this.pageSize,e).then(t=>{let r=t.data||[];r.forEach(c=>{c.contentSafeHtmlPreview=this.sanitizer.bypassSecurityTrustHtml(c.content||"")}),this.articles=[...this.articles,...r],r.length<this.pageSize?this.allLoaded=!0:this.page++,this.loading=!1})}getAuthors(){return u(this,null,function*(){try{let t=(yield this.articleService.getAuthors()).data?.map(r=>r.profiles);this.authors=t||[]}catch(e){console.error("Error fetching authors:",e),this.error="Failed to load authors."}})}getExistingTags(){return u(this,null,function*(){try{let t=(yield this.articleService.getTags()).data?.map(r=>r.tag);this.tags=t||[]}catch(e){console.error("Error fetching tags:",e),this.error="Failed to load tags."}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["app-blog-article-list"]],standalone:!0,features:[A],decls:1,vars:0,consts:[[4,"transloco"],["appearance","outlined"],[1,"pl"],[1,"text-xs","pl-1","lowercase"],["aria-label","Tag selection",1,"pt-2"],[4,"ngFor","ngForOf"],[1,"mt-1"],["aria-label","Author selection",1,"pt-2"],[1,"mt-8"],["class","loading-spinner",4,"ngIf"],["class","error-message",4,"ngIf"],["class","end-message",4,"ngIf"],[1,"text-xs"],[1,"mb-4"],["mat-button","",1,"cursor-pointer","hover:underline",3,"routerLink"],[1,"flex","gap-1","justify-start","items-center","text-xs","font-light"],[1,"content-text","mt-8","mb-4",3,"innerHTML"],["routerLinkActive","item-selected","class","hover:underline color-secondary pt-8",3,"routerLink",4,"ngIf"],["class","flex justify-end",4,"ngIf"],[1,"post-separator","z-10"],["routerLinkActive","item-selected",1,"hover:underline","color-secondary","pt-8",3,"routerLink"],[1,"flex","justify-end"],["routerLinkActive","item-selected","mat-button","",3,"routerLink"],[1,"loading-spinner"],[1,"error-message"],[1,"end-message"]],template:function(t,r){t&1&&g(0,Fi,21,9,"ng-container",0)},dependencies:[H,j,z,le,se,y,ie,re,ne,V,st,B,rt,nt,N,Se,ye,be,Qt,ae],styles:["mat-card-header[_ngcontent-%COMP%]{border:0px!important}.no-underline[_ngcontent-%COMP%]{text-decoration-line:none!important}.content-text[_ngcontent-%COMP%]{line-height:1.6em;height:8em;overflow:hidden}.loading-spinner[_ngcontent-%COMP%], .end-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{text-align:center;padding:16px;font-size:14px}.error-message[_ngcontent-%COMP%]{color:red}.scroll-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.post-separator[_ngcontent-%COMP%]{height:1px;margin:16px 0}"]})}return i})();var Pi=["editor"],Ut=(()=>{class i{editor;articleService=l(Q);route=l(oe);formBuilder=l(me);matDialog=l(ce);router=l(L);snackBar=l(ve);sanitizer=l(T);cdRef=l(Y);supabaseAuthService=l(k);get article(){return this._article}set article(e){this.sanitizeHtml(e),this._article=e}_article={};editorInitialized=!1;articleForm;editorApiKey=ge.tinyMicApiKeys;errorMessages=[];id=+this.route.snapshot.params.id;get content(){return this.articleForm.get("content")}get title(){return this.articleForm.get("title")}ngOnInit(){this.id=+this.route.snapshot.params.id,this.getArticle(!0)}initializeData(){return u(this,null,function*(){})}back(e=!1){return u(this,null,function*(){this.articleForm.dirty&&!e&&!(yield this.matDialog.open(E,{data:{title:"Unsaved changes",text:"Are you sure you want to leave this page?",confirmText:"Leave"}}).afterClosed().toPromise())||this.router.navigate(["/blog"])})}createForm(e={}){this.articleForm=this.formBuilder.group({title:[e?.title,W.required],content:[e?.content,W.required]})}getArticle(e=!1){return u(this,null,function*(){if(!this.id){this.createForm();return}let t=(yield this.articleService.get(this.id)).data?.[0];t&&(this.article=t??{},e&&this.createForm(t))})}sanitizeHtml(e){e.contentSafeHtml=this.sanitizer.bypassSecurityTrustHtml(e.content||"")}onDelete(){return u(this,null,function*(){(yield this.matDialog.open(E).afterClosed().toPromise())&&(yield this.articleService.delete(this.id),this.openSnackBar("Article deleted"),this.back(!0))})}onRestore(){return u(this,null,function*(){(yield this.matDialog.open(E,{data:{title:"Restore article",text:"Are you sure you want to restore this article?",confirmText:"Restore"}}).afterClosed().toPromise())&&(yield this.getArticle(!0),this.openSnackBar("Article restored"))})}openSnackBar(e){this.snackBar.open(e,"")}onSubmit(){return u(this,null,function*(){this.errorMessages=[],this.articleForm.get("title")?.patchValue(this.title?.value?.trim()),this.articleForm.get("content")?.patchValue(this.content?.value?.trim());let e=this.articleForm.errors;if(e&&(this.errorMessages=Object.keys(e).map(t=>e[t])),!this.articleForm.invalid){if(this.article.title=this.title?.value,this.article.content=this.content?.value,this.id)yield this.articleService.put(this.id,this.articleForm.value),this.openSnackBar("Article saved");else{let t=yield this.articleService.post(this.articleForm.value);t&&(this.id=t.data?.[0].id),this.router.navigate(["/blog/"+this.id+"/edit"]),this.openSnackBar("Article created")}this.articleForm.reset(this.articleForm.value)}})}toggleEdit(){this.articleForm.dirty&&(this.article=F(F({},this.articleForm.value),this.article))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["app-blog-article"]],viewQuery:function(t,r){if(t&1&&x(Pi,5),t&2){let c;M(c=O())&&(r.editor=c.first)}},standalone:!0,features:[A],decls:14,vars:9,consts:[[1,"h-full",3,"appearance"],[1,"flex","flex-col","justify-start","gap-6","mb-12","w-full"],[1,"flex","page-title","justify-start"],[1,"flex","flex-row","items","gap-2","items-center","text-ellipsis"],[1,"rounded-full","w-16","mat-elevation-z2",3,"src"],[1,"flex","flex-col"],[1,"font-light","text-sm"],[1,"content-text",3,"innerHTML"]],template:function(t,r){if(t&1&&(a(0,"mat-card",0)(1,"mat-card-content")(2,"div",1)(3,"h1",2),d(4),s(),a(5,"div",3),_(6,"img",4),a(7,"div",5)(8,"span"),d(9),s(),a(10,"span",6),d(11),ee(12,"date"),s()()()(),_(13,"div",7),s()()),t&2){let c;p("appearance","outlined"),o(4),h(" ",r.article.title," "),o(2),p("src",r.article.profiles==null?null:r.article.profiles.avatar_url,Re),o(3),C((c=r.article.profiles==null?null:r.article.profiles.full_name)!==null&&c!==void 0?c:r.article.profiles==null?null:r.article.profiles.email),o(2),h(" ",te(12,6,r.article.inserted_at,"longDate")," "),o(2),p("innerHTML",r.article.contentSafeHtml,J)}},dependencies:[he,de,V,N,Ce,ue,y,ne,H,j,z,pe,B],styles:["mat-card-content[_ngcontent-%COMP%]{padding-bottom:0!important}mat-card-header[_ngcontent-%COMP%]{border:0px!important}"]})}return i})();var Yt=[{path:"resume",loadComponent:()=>import("./chunk-R2YMASUR.js").then(i=>i.ResumeComponent),pathMatch:"full"},{path:"about",loadComponent:()=>import("./chunk-INSB73JJ.js").then(i=>i.AboutComponent),pathMatch:"full"},{path:"blog",loadComponent:()=>import("./chunk-DJ5DISIF.js").then(i=>i.BlogComponent),children:[{path:"",component:Kt,pathMatch:"full"},{path:"new",component:Ee,pathMatch:"full"},{path:":id/edit",component:Ee,pathMatch:"full"},{path:":id",component:Ut,pathMatch:"full"},{path:"**",redirectTo:"",pathMatch:"full"}]},{path:"heart-love",loadComponent:()=>import("./chunk-GNDIUUEE.js").then(i=>i.HeartLoveComponent),pathMatch:"full"},{path:"manage-profile",loadComponent:()=>import("./chunk-OSYD4P5W.js").then(i=>i.AccountManagerComponent)},{path:"**",redirectTo:"about",pathMatch:"full"}];var Gt=(()=>{class i{http=l(Ge);getTranslation(e){return this.http.get(`/assets/i18n/${e}.json`)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var $t=kt,Xt={providers:[dt({config:{availableLangs:$t,defaultLang:"en",reRenderOnLangChange:!0,prodMode:!qe()},loader:Gt}),Qe({eventCoalescing:!0}),ot(Yt),{provide:Ke,useClass:Ue},et(),$e(Xe()),jt(),{provide:We,useFactory:(i,n,e,t)=>()=>u(void 0,null,function*(){t.initializeSupabase(),$t.forEach(r=>e.load(r).subscribe()),i.initializeTranslation(),n.initializeTheme()}),deps:[Et,Tt,mt,_e],multi:!0},{provide:Dt,useValue:{duration:2e3}}]};Je(Nt,Xt).catch(i=>console.error(i));
